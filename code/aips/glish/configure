#! /bin/sh

# Guess values for system-dependent variables and create Makefiles.
# Generated automatically using autoconf version 2.10 
# Copyright (C) 1992, 93, 94, 95, 96 Free Software Foundation, Inc.
#
# This configure script is free software; the Free Software Foundation
# gives unlimited permission to copy, distribute and modify it.

# Defaults:
ac_help=
ac_default_prefix=/usr/local
# Any additions from configure.in:
ac_help="$ac_help
  --enable-static-binary       force binaries to be static"
ac_help="$ac_help
  --enable-shared              build shared libraries"
ac_help="$ac_help
  --enable-os-malloc           do not use Lea malloc"
ac_help="$ac_help
  --enable-min-space           delete intermediate objects"
ac_arg_assign_help="$ac_arg_assign_help
  --rc-dir=SITE_RC_DIR         directory for sitewide .glishrc"
ac_arg_assign_options="$ac_arg_assign_options rc-dir"
ac_arg_assign_help="$ac_arg_assign_help
  --key-dir=SITE_KEY_DIR       directory for sitewide key files"
ac_arg_assign_options="$ac_arg_assign_options key-dir"
ac_arg_assign_help="$ac_arg_assign_help
  --script-dir=SCRIPT_DIR      directory for sitewide script files"
ac_arg_assign_options="$ac_arg_assign_options script-dir"
ac_arg_assign_help="$ac_arg_assign_help
  --script-dir-tcl=SCRIPT_DIR  directory for sitewide tcl files"
ac_arg_assign_options="$ac_arg_assign_options script-dir-tcl"
ac_arg_assign_help="$ac_arg_assign_help
  --load-dir=LOAD_DIR          directory for loadable shared objects"
ac_arg_assign_options="$ac_arg_assign_options load-dir"
ac_arg_assign_help="$ac_arg_assign_help
  --tcl-includes=DIR           system tcl and tk include files are in DIR"
ac_arg_assign_options="$ac_arg_assign_options tcl-includes"
ac_arg_assign_help="$ac_arg_assign_help
  --tcl-libraries=DIR          system tcl and tk libraries are in DIR"
ac_arg_assign_options="$ac_arg_assign_options tcl-libraries"
ac_help="$ac_help
  --enable-pgplot              build pgplot"
ac_arg_assign_help="$ac_arg_assign_help
  --pgplot-incl-flags=flags    PGPLOT include flags"
ac_arg_assign_options="$ac_arg_assign_options pgplot-incl-flags"
ac_arg_assign_help="$ac_arg_assign_help
  --pgplot-link-flags=flags    PGPLOT link flags"
ac_arg_assign_options="$ac_arg_assign_options pgplot-link-flags"
ac_arg_assign_help="$ac_arg_assign_help
  --pgplot-link-search=flags   PGPLOT search flags"
ac_arg_assign_options="$ac_arg_assign_options pgplot-link-search"
ac_arg_assign_help="$ac_arg_assign_help
  --extra-libs=libs            libraries to add to link line"
ac_arg_assign_options="$ac_arg_assign_options extra-link-libs"
ac_help="$ac_help
  --disable-strip              do not strip binaries"
ac_help="$ac_help
  --with-x                use the X Window System"

# Initialize some variables set by options.
# The variables have the same names as the options, with
# dashes changed to underlines.
build=NONE
cache_file=./config.cache
arg_cache_file=
exec_prefix=NONE
host=NONE
no_create=
nonopt=NONE
no_recursion=
prefix=NONE
program_prefix=NONE
program_suffix=NONE
program_transform_name=s,x,x,
silent=
site=
srcdir=
target=NONE
verbose=
x_includes=NONE
x_libraries=NONE
bindir='${exec_prefix}/bin'
sbindir='${exec_prefix}/sbin'
libexecdir='${exec_prefix}/libexec'
datadir='${prefix}/share'
sysconfdir='${prefix}/etc'
sharedstatedir='${prefix}/com'
localstatedir='${prefix}/var'
libdir='${exec_prefix}/lib'
includedir='${prefix}/include'
oldincludedir='/usr/include'
infodir='${prefix}/info'
mandir='${prefix}/man'

# Initialize some other variables.
subdirs=
MFLAGS= MAKEFLAGS=

ac_prev=
for ac_option
do

  # If the previous option needs an argument, assign it.
  if test -n "$ac_prev"; then
    eval "$ac_prev=\$ac_option"
    ac_prev=
    continue
  fi

  case "$ac_option" in
  -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
  *) ac_optarg= ;;
  esac

  # Accept the important Cygnus configure options, so we can diagnose typos.

  case "$ac_option" in

  -bindir | --bindir | --bindi | --bind | --bin | --bi)
    ac_prev=bindir ;;
  -bindir=* | --bindir=* | --bindi=* | --bind=* | --bin=* | --bi=*)
    bindir="$ac_optarg" ;;

  -build | --build | --buil | --bui | --bu)
    ac_prev=build ;;
  -build=* | --build=* | --buil=* | --bui=* | --bu=*)
    build="$ac_optarg" ;;

  -cache-file | --cache-file | --cache-fil | --cache-fi \
  | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
    ac_prev=arg_cache_file ;;
  -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
  | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
    arg_cache_file="$ac_optarg" ;;

  -datadir | --datadir | --datadi | --datad | --data | --dat | --da)
    ac_prev=datadir ;;
  -datadir=* | --datadir=* | --datadi=* | --datad=* | --data=* | --dat=* \
  | --da=*)
    datadir="$ac_optarg" ;;

  -disable-* | --disable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    eval "enable_${ac_feature}=no" ;;

  -enable-* | --enable-*)
    ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
    fi
    ac_feature=`echo $ac_feature| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "enable_${ac_feature}='$ac_optarg'" ;;

  -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
  | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
  | --exec | --exe | --ex)
    ac_prev=exec_prefix ;;
  -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
  | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
  | --exec=* | --exe=* | --ex=*)
    exec_prefix="$ac_optarg" ;;

  -gas | --gas | --ga | --g)
    # Obsolete; use --with-gas.
    with_gas=yes ;;

  -help | --help | --hel | --he)
    # Omit some internal or obsolete options to make the list less imposing.
    # This message is too long to be a string in the A/UX 3.1 sh.
    cat << EOF
Usage: configure [options] [host]
Options: [defaults in brackets after descriptions]
Configuration:
  --cache-file=FILE       cache test results in FILE
  --help                  print this message
  --no-create             do not create output files
  --quiet, --silent       do not print \`checking...' messages
  --version               print the version of autoconf that created configure
Directory and file names:
  --prefix=PREFIX         install architecture-independent files in PREFIX
                          [$ac_default_prefix]
  --exec-prefix=EPREFIX   install architecture-dependent files in EPREFIX
                          [same as prefix]
  --bindir=DIR            user executables in DIR [EPREFIX/bin]
  --sbindir=DIR           system admin executables in DIR [EPREFIX/sbin]
  --libexecdir=DIR        program executables in DIR [EPREFIX/libexec]
  --datadir=DIR           read-only architecture-independent data in DIR
                          [PREFIX/share]
  --sysconfdir=DIR        read-only single-machine data in DIR [PREFIX/etc]
  --sharedstatedir=DIR    modifiable architecture-independent data in DIR
                          [PREFIX/com]
  --localstatedir=DIR     modifiable single-machine data in DIR [PREFIX/var]
  --libdir=DIR            object code libraries in DIR [EPREFIX/lib]
  --includedir=DIR        C header files in DIR [PREFIX/include]
  --oldincludedir=DIR     C header files for non-gcc in DIR [/usr/include]
  --infodir=DIR           info documentation in DIR [PREFIX/info]
  --mandir=DIR            man documentation in DIR [PREFIX/man]
  --srcdir=DIR            find the sources in DIR [configure dir or ..]
  --program-prefix=PREFIX prepend PREFIX to installed program names
  --program-suffix=SUFFIX append SUFFIX to installed program names
  --program-transform-name=PROGRAM
                          run sed PROGRAM on installed program names
EOF
    cat << EOF
Host type:
  --build=BUILD           configure for building on BUILD [BUILD=HOST]
  --host=HOST             configure for HOST [guessed]
  --target=TARGET         configure for TARGET [TARGET=HOST]
Features and packages:
  --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
  --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
  --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
  --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
  --x-includes=DIR        X include files are in DIR
  --x-libraries=DIR       X library files are in DIR
EOF

    if test -n "$ac_arg_assign_help" -a -n "$ac_help"; then
        echo "Package specific options recognized:${ac_help}${ac_arg_assign_help}"
    else
        if test -n "$ac_arg_assign_help"; then
            echo "Package specific assign options recognized:$ac_arg_assign_help"
        fi
        if test -n "$ac_help"; then
            echo "Package specific --enable and --with options recognized:$ac_help"
        fi
    fi
    exit 0 ;;

  -host | --host | --hos | --ho)
    ac_prev=host ;;
  -host=* | --host=* | --hos=* | --ho=*)
    host="$ac_optarg" ;;

  -includedir | --includedir | --includedi | --included | --include \
  | --includ | --inclu | --incl | --inc)
    ac_prev=includedir ;;
  -includedir=* | --includedir=* | --includedi=* | --included=* | --include=* \
  | --includ=* | --inclu=* | --incl=* | --inc=*)
    includedir="$ac_optarg" ;;

  -infodir | --infodir | --infodi | --infod | --info | --inf)
    ac_prev=infodir ;;
  -infodir=* | --infodir=* | --infodi=* | --infod=* | --info=* | --inf=*)
    infodir="$ac_optarg" ;;

  -libdir | --libdir | --libdi | --libd)
    ac_prev=libdir ;;
  -libdir=* | --libdir=* | --libdi=* | --libd=*)
    libdir="$ac_optarg" ;;

  -libexecdir | --libexecdir | --libexecdi | --libexecd | --libexec \
  | --libexe | --libex | --libe)
    ac_prev=libexecdir ;;
  -libexecdir=* | --libexecdir=* | --libexecdi=* | --libexecd=* | --libexec=* \
  | --libexe=* | --libex=* | --libe=*)
    libexecdir="$ac_optarg" ;;

  -localstatedir | --localstatedir | --localstatedi | --localstated \
  | --localstate | --localstat | --localsta | --localst \
  | --locals | --local | --loca | --loc | --lo)
    ac_prev=localstatedir ;;
  -localstatedir=* | --localstatedir=* | --localstatedi=* | --localstated=* \
  | --localstate=* | --localstat=* | --localsta=* | --localst=* \
  | --locals=* | --local=* | --loca=* | --loc=* | --lo=*)
    localstatedir="$ac_optarg" ;;

  -mandir | --mandir | --mandi | --mand | --man | --ma | --m)
    ac_prev=mandir ;;
  -mandir=* | --mandir=* | --mandi=* | --mand=* | --man=* | --ma=* | --m=*)
    mandir="$ac_optarg" ;;

  -nfp | --nfp | --nf)
    # Obsolete; use --without-fp.
    with_fp=no ;;

  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c)
    no_create=yes ;;

  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
    no_recursion=yes ;;

  -oldincludedir | --oldincludedir | --oldincludedi | --oldincluded \
  | --oldinclude | --oldinclud | --oldinclu | --oldincl | --oldinc \
  | --oldin | --oldi | --old | --ol | --o)
    ac_prev=oldincludedir ;;
  -oldincludedir=* | --oldincludedir=* | --oldincludedi=* | --oldincluded=* \
  | --oldinclude=* | --oldinclud=* | --oldinclu=* | --oldincl=* | --oldinc=* \
  | --oldin=* | --oldi=* | --old=* | --ol=* | --o=*)
    oldincludedir="$ac_optarg" ;;

  -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
    ac_prev=prefix ;;
  -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
    prefix="$ac_optarg" ;;

  -program-prefix | --program-prefix | --program-prefi | --program-pref \
  | --program-pre | --program-pr | --program-p)
    ac_prev=program_prefix ;;
  -program-prefix=* | --program-prefix=* | --program-prefi=* \
  | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
    program_prefix="$ac_optarg" ;;

  -program-suffix | --program-suffix | --program-suffi | --program-suff \
  | --program-suf | --program-su | --program-s)
    ac_prev=program_suffix ;;
  -program-suffix=* | --program-suffix=* | --program-suffi=* \
  | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
    program_suffix="$ac_optarg" ;;

  -program-transform-name | --program-transform-name \
  | --program-transform-nam | --program-transform-na \
  | --program-transform-n | --program-transform- \
  | --program-transform | --program-transfor \
  | --program-transfo | --program-transf \
  | --program-trans | --program-tran \
  | --progr-tra | --program-tr | --program-t)
    ac_prev=program_transform_name ;;
  -program-transform-name=* | --program-transform-name=* \
  | --program-transform-nam=* | --program-transform-na=* \
  | --program-transform-n=* | --program-transform-=* \
  | --program-transform=* | --program-transfor=* \
  | --program-transfo=* | --program-transf=* \
  | --program-trans=* | --program-tran=* \
  | --progr-tra=* | --program-tr=* | --program-t=*)
    program_transform_name="$ac_optarg" ;;

  -q | -quiet | --quiet | --quie | --qui | --qu | --q \
  | -silent | --silent | --silen | --sile | --sil)
    silent=yes ;;

  -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
    ac_prev=sbindir ;;
  -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
  | --sbi=* | --sb=*)
    sbindir="$ac_optarg" ;;

  -sharedstatedir | --sharedstatedir | --sharedstatedi \
  | --sharedstated | --sharedstate | --sharedstat | --sharedsta \
  | --sharedst | --shareds | --shared | --share | --shar \
  | --sha | --sh)
    ac_prev=sharedstatedir ;;
  -sharedstatedir=* | --sharedstatedir=* | --sharedstatedi=* \
  | --sharedstated=* | --sharedstate=* | --sharedstat=* | --sharedsta=* \
  | --sharedst=* | --shareds=* | --shared=* | --share=* | --shar=* \
  | --sha=* | --sh=*)
    sharedstatedir="$ac_optarg" ;;

  -site | --site | --sit)
    ac_prev=site ;;
  -site=* | --site=* | --sit=*)
    site="$ac_optarg" ;;

  -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
    ac_prev=srcdir ;;
  -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
    srcdir="$ac_optarg" ;;

  -sysconfdir | --sysconfdir | --sysconfdi | --sysconfd | --sysconf \
  | --syscon | --sysco | --sysc | --sys | --sy)
    ac_prev=sysconfdir ;;
  -sysconfdir=* | --sysconfdir=* | --sysconfdi=* | --sysconfd=* | --sysconf=* \
  | --syscon=* | --sysco=* | --sysc=* | --sys=* | --sy=*)
    sysconfdir="$ac_optarg" ;;

  -target | --target | --targe | --targ | --tar | --ta | --t)
    ac_prev=target ;;
  -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
    target="$ac_optarg" ;;

  -v | -verbose | --verbose | --verbos | --verbo | --verb)
    verbose=yes ;;

  -version | --version | --versio | --versi | --vers)
    echo "configure generated by autoconf version 2.10"
    exit 0 ;;

  -with-* | --with-*)
    ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    case "$ac_option" in
      *=*) ;;
      *) ac_optarg=yes ;;
    esac
    eval "with_${ac_package}='$ac_optarg'" ;;

  -without-* | --without-*)
    ac_package=`echo $ac_option|sed -e 's/-*without-//'`
    # Reject names that are not valid shell variable names.
    if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
      { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
    fi
    ac_package=`echo $ac_package| sed 's/-/_/g'`
    eval "with_${ac_package}=no" ;;

  --x)
    # Obsolete; use --with-x.
    with_x=yes ;;

  -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
  | --x-incl | --x-inc | --x-in | --x-i)
    ac_prev=x_includes ;;
  -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
  | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
    x_includes="$ac_optarg" ;;

  -x-libraries | --x-libraries | --x-librarie | --x-librari \
  | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
    ac_prev=x_libraries ;;
  -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
  | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
    x_libraries="$ac_optarg" ;;

  -*) 
        caught_option=""
        for this_option in $ac_arg_assign_options; do
            case "$ac_option" in
                --$this_option=* | -$this_option=*)
                    caught_option="yes"
                    opt_var=`echo $this_option | sed 's/-/_/g'`
                    eval "option_${opt_var}='$ac_optarg'"
                    break
                    ;;
            esac
        done

	if test -z "$caught_option"; then
            { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; exit 1; }
        fi
    ;;

  *)
    if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
      echo "configure: warning: $ac_option: invalid host type" 1>&2
    fi
    if test "x$nonopt" != xNONE; then
      { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; }
    fi
    nonopt="$ac_option"
    ;;

  esac
done

if test -n "$ac_prev"; then
  { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; exit 1; }
fi


conftest='conftest'
confdefs='confdefs'
trap 'rm -fr $conftest* $confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

# File descriptor usage:
# 0 standard input
# 1 file creation
# 2 errors and warnings
# 3 some systems may open it to /dev/tty
# 4 used on the Kubota Titan
# 6 checking for... messages and results
# 5 compiler messages saved in config.log
if test "$silent" = yes; then
  exec 6>/dev/null
else
  exec 6>&1
fi

ac_aux_dir=
for ac_dir in config ../config; do
  if test -f $ac_dir/install-sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install-sh -c"
    break
  elif test -f $ac_dir/install.sh; then
    ac_aux_dir=$ac_dir
    ac_install_sh="$ac_aux_dir/install.sh -c"
    break
  fi
done
if test -z "$ac_aux_dir"; then
  { echo "configure: error: can not find install-sh or install.sh in config ../config" 1>&2; exit 1; }
fi
ac_config_guess=$ac_aux_dir/config.guess
ac_config_sub=$ac_aux_dir/config.sub
ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.


if test -z "$ARCH"; then
    
# Make sure we can run config.sub.
if $ac_config_sub sun4 >/dev/null 2>&1; then :
else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
fi

echo $ac_n "checking host system type""... $ac_c" 1>&6

host_alias=$host
case "$host_alias" in
NONE)
  case $nonopt in
  NONE)
    if host_alias=`$ac_config_guess`; then :
    else { echo "configure: error: can not guess host type; you must specify one" 1>&2; exit 1; }
    fi ;;
  *) host_alias=$nonopt ;;
  esac ;;
esac

host=`$ac_config_sub $host_alias`
host_cpu=`echo $host | sed 's/^\([^-][^-]*\)-\([^-][^-]*\)-\([^-][^-]*\).*/\1/'`
host_vendor=`echo $host | sed 's/^\([^-][^-]*\)-\([^-][^-]*\)-\([^-][^-]*\).*/\2/'`
host_os=`echo $host | sed 's/^\([^-][^-]*\)-\([^-][^-]*\)-\([^-][^-]*\).*/\3/'`
echo "$ac_t""$host" 1>&6

    ARCH="$host"
fi

conftest="$ARCH.conftest"
confdefs="$ARCH.confdefs"
confcache="$ARCH.confcache"
export conftest confdefs confcache

##
## export needed for expanding ".../$ARCH/config.h"
##
export ARCH

if test ! -d ./$ARCH; then
    mkdir ./$ARCH || { echo "configure: error: cannot create ./$ARCH " 1>&2; exit 1; }
fi

if test -z "$arg_cache_file"; then
	cache_file=./$ARCH/config.cache
else
	cache_file=$arg_cache_file
fi

CONFIG_STATUS=./$ARCH/config.status
CONFIG_LOG=./$ARCH/config.log


# Strip out --no-create and --no-recursion so they do not pile up.
# Also quote any args containing shell metacharacters.
ac_configure_args=
for ac_arg
do
  case "$ac_arg" in
  -no-create | --no-create | --no-creat | --no-crea | --no-cre \
  | --no-cr | --no-c) ;;
  -no-recursion | --no-recursion | --no-recursio | --no-recursi \
  | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
  *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
  ac_configure_args="$ac_configure_args '$ac_arg'" ;;
  *) ac_configure_args="$ac_configure_args $ac_arg" ;;
  esac
done

# NLS nuisances.
# Only set LANG and LC_ALL to C if already set.
# These must not be set unconditionally because not all systems understand
# e.g. LANG=C (notably SCO).
if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi

# $confdefs.h avoids OS command line length limits that DEFS can exceed.
rm -rf $conftest* $confdefs.h
# AIX cpp loses on an empty file, so make sure it contains at least a newline.
echo > $confdefs.h

# A filename unique to this package, relative to the directory that
# configure is in, which we can look for to find out if srcdir is correct.
ac_unique_file=glish

# Find the source files, if location was not specified.
if test -z "$srcdir"; then
  ac_srcdir_defaulted=yes
  # Try the directory containing this script, then its parent.
  ac_prog=$0
  ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
  test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
  srcdir=$ac_confdir
  if test ! -r $srcdir/$ac_unique_file; then
    srcdir=..
  fi
else
  ac_srcdir_defaulted=no
fi
if test ! -r $srcdir/$ac_unique_file; then
  if test "$ac_srcdir_defaulted" = yes; then
    { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
  else
    { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
  fi
fi
srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`

# Prefer explicitly selected file to automatically selected ones.
if test -z "$CONFIG_SITE"; then
  if test "x$prefix" != xNONE; then
    CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
  else
    CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
  fi
fi
for ac_site_file in $CONFIG_SITE; do
  if test -r "$ac_site_file"; then
    echo "loading site script $ac_site_file"
    . "$ac_site_file"
  fi
done

if test -r "$cache_file"; then
  echo "loading cache $cache_file"
  . $cache_file
else
  echo "creating cache $cache_file"
  > $cache_file
fi

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS $conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o $conftest $CFLAGS $CPPFLAGS $LDFLAGS $conftest.$ac_ext $LIBS 1>&5'

if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
  # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
  if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
    ac_n= ac_c='
' ac_t='	'
  else
    ac_n=-n ac_c= ac_t=
  fi
else
  ac_n= ac_c='\c' ac_t=
fi


: ${CONFIG_LOG=./config.log}
exec 5>$CONFIG_LOG
echo "\
This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.
" 1>&5


## Copyright (c) 1993 The Regents of the University of California.
## Copyright (c) 1997,1998,1999,2000,2002 Associated Universities Inc.
##
## Note: Glish requires flex version 2.4.6 or greater.  Flex is available
## from ftp.ee.lbl.gov.
##
## This autoconf input file was designed to work with a modified version of
## autoconf which allows multiple compiles within the same source tree to
## proceed in parallel. However, large parts will work with the stock
## autoconf.
##

if eval "test \"`echo '$''{'_cv_version'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  _cv_version=`cat glish/version.h | head -1 | sed 's/^[^0-9]*\([0-9][0-9]*\.[0-9][0-9]*\).*/\1/'`
fi


# Check whether --enable-static-binary or --disable-static-binary was given.
if test "${enable_static_binary+set}" = set; then
  enableval="$enable_static_binary"
  :
fi

# Check whether --enable-shared or --disable-shared was given.
if test "${enable_shared+set}" = set; then
  enableval="$enable_shared"
  :
fi

# Check whether --enable-os-malloc or --disable-os-malloc was given.
if test "${enable_os_malloc+set}" = set; then
  enableval="$enable_os_malloc"
  :
fi

# Check whether --enable-min-space or --disable-min-space was given.
if test "${enable_min_space+set}" = set; then
  enableval="$enable_min_space"
  :
fi








# Check whether --enable-pgplot or --disable-pgplot was given.
if test "${enable_pgplot+set}" = set; then
  enableval="$enable_pgplot"
  :
fi





# Check whether --enable-strip or --disable-strip was given.
if test "${enable_strip+set}" = set; then
  enableval="$enable_strip"
  :
fi


if test "$enable_static_binary" = "yes" -o "$enable_shared" != "yes"; then
	static_binary="yes"
else
	static_binary=
fi

if test "$enable_strip" = 'no'; then
	strip_binary=
else
	strip_binary='-s'
fi































conf_root=`echo $cache_file | sed 's/^\([\.\/]*\).*/\1/'`
conf_root=`echo $conf_root | sed -e 's/\/\.\//\//' -e 's/^\.\///' -e 's/\/\.$//' -e 's/\/$//'`
if test -z "$conf_root"; then
    conf_root=.
    top_off=""
else
    top_off="/$conf_root"
fi
mkhier="${conf_root}/config/mkhier"

test "x$prefix" = xNONE && prefix="."
tmp_prefix="$prefix"
while :
do
    case "${tmp_prefix}" in
	*\$\{*\}*) tmp_prefix=`eval "echo ${tmp_prefix}"` ;;
	*) break ;;
    esac
done
tmp_prefix_rel_path=`echo ${tmp_prefix} | sed 's/^\([\.\/]*\).*/\1/'`
tmp_prefix_rel_path=`echo $tmp_prefix_rel_path | sed -e 's/\/\.\//\//' -e 's/^\.\///' -e 's/\/\.$//' -e 's/\/$//'`
if test -n "$tmp_prefix_rel_path"; then
    tmp_prefix_root=`cd $tmp_prefix_rel_path; pwd`
    case "${tmp_prefix_root}" in
    /tmp_mnt/*)
	tmp_prefix_root_tmp_mnt=`echo ${tmp_prefix_root} | sed 's/^\/tmp_mnt\///'`
	test -d "/${tmp_prefix_root_tmp_mnt}" && tmp_prefix_root="/${tmp_prefix_root_tmp_mnt}"
	;;
esac

    tmp_prefix_end=`echo ${tmp_prefix} | sed 's/^\([\.\/]*\)//'`
    tmp_prefix=`echo "$tmp_prefix_root/$tmp_prefix_end" | sed 's/\/$//'`
fi

if test "$prefix" != "$tmp_prefix"; then
    prefix="$tmp_prefix"
    configure_args=
    prev=
    found_prefix=
    for arg in $ac_configure_args; do
	if test -n "$prev"; then
	    prev=
	    configure_args="$configure_args $prefix"
	else
	    case "$arg" in
		-prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
		    prev=prefix
		    found_prefix=TRUE
		    ;;
		-prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
		    configure_args="$configure_args --prefix=$prefix"
		    found_prefix=TRUE
		    ;;
		*) configure_args="$configure_args $arg" ;;
	    esac
	fi
    done
    if test -n "$found_prefix"; then
	ac_configure_args="$configure_args"
    else
	ac_configure_args="$configure_args --prefix=$prefix"
    fi
fi

test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

if test -z "$option_script_dir"; then
	SCRIPTDIR="${datadir}/glish"
	while :
do
    case "${SCRIPTDIR}" in
	*\$\{*\}*) SCRIPTDIR=`eval "echo ${SCRIPTDIR}"` ;;
	*) break ;;
    esac
done
SCRIPTDIR_rel_path=`echo ${SCRIPTDIR} | sed 's/^\([\.\/]*\).*/\1/'`
SCRIPTDIR_rel_path=`echo $SCRIPTDIR_rel_path | sed -e 's/\/\.\//\//' -e 's/^\.\///' -e 's/\/\.$//' -e 's/\/$//'`
if test -n "$SCRIPTDIR_rel_path"; then
    SCRIPTDIR_root=`cd $SCRIPTDIR_rel_path; pwd`
    case "${SCRIPTDIR_root}" in
    /tmp_mnt/*)
	SCRIPTDIR_root_tmp_mnt=`echo ${SCRIPTDIR_root} | sed 's/^\/tmp_mnt\///'`
	test -d "/${SCRIPTDIR_root_tmp_mnt}" && SCRIPTDIR_root="/${SCRIPTDIR_root_tmp_mnt}"
	;;
esac

    SCRIPTDIR_end=`echo ${SCRIPTDIR} | sed 's/^\([\.\/]*\)//'`
    SCRIPTDIR=`echo "$SCRIPTDIR_root/$SCRIPTDIR_end" | sed 's/\/$//'`
fi

else
	SCRIPTDIR="$option_script_dir"
fi


if test -z "$option_script_dir_tcl"; then
	SCRIPTDIRTCL="${SCRIPTDIR}/tcl"
	while :
do
    case "${SCRIPTDIRTCL}" in
	*\$\{*\}*) SCRIPTDIRTCL=`eval "echo ${SCRIPTDIRTCL}"` ;;
	*) break ;;
    esac
done
SCRIPTDIRTCL_rel_path=`echo ${SCRIPTDIRTCL} | sed 's/^\([\.\/]*\).*/\1/'`
SCRIPTDIRTCL_rel_path=`echo $SCRIPTDIRTCL_rel_path | sed -e 's/\/\.\//\//' -e 's/^\.\///' -e 's/\/\.$//' -e 's/\/$//'`
if test -n "$SCRIPTDIRTCL_rel_path"; then
    SCRIPTDIRTCL_root=`cd $SCRIPTDIRTCL_rel_path; pwd`
    case "${SCRIPTDIRTCL_root}" in
    /tmp_mnt/*)
	SCRIPTDIRTCL_root_tmp_mnt=`echo ${SCRIPTDIRTCL_root} | sed 's/^\/tmp_mnt\///'`
	test -d "/${SCRIPTDIRTCL_root_tmp_mnt}" && SCRIPTDIRTCL_root="/${SCRIPTDIRTCL_root_tmp_mnt}"
	;;
esac

    SCRIPTDIRTCL_end=`echo ${SCRIPTDIRTCL} | sed 's/^\([\.\/]*\)//'`
    SCRIPTDIRTCL=`echo "$SCRIPTDIRTCL_root/$SCRIPTDIRTCL_end" | sed 's/\/$//'`
fi

else
	SCRIPTDIRTCL="$option_script_dir_tcl"
fi


if test -z "$option_rc_dir"; then
    RCDIR="$SCRIPTDIR"
else
    RCDIR="$option_rc_dir"
fi


full_libdir="$libdir"
while :
do
    case "${full_libdir}" in
	*\$\{*\}*) full_libdir=`eval "echo ${full_libdir}"` ;;
	*) break ;;
    esac
done
full_libdir_rel_path=`echo ${full_libdir} | sed 's/^\([\.\/]*\).*/\1/'`
full_libdir_rel_path=`echo $full_libdir_rel_path | sed -e 's/\/\.\//\//' -e 's/^\.\///' -e 's/\/\.$//' -e 's/\/$//'`
if test -n "$full_libdir_rel_path"; then
    full_libdir_root=`cd $full_libdir_rel_path; pwd`
    case "${full_libdir_root}" in
    /tmp_mnt/*)
	full_libdir_root_tmp_mnt=`echo ${full_libdir_root} | sed 's/^\/tmp_mnt\///'`
	test -d "/${full_libdir_root_tmp_mnt}" && full_libdir_root="/${full_libdir_root_tmp_mnt}"
	;;
esac

    full_libdir_end=`echo ${full_libdir} | sed 's/^\([\.\/]*\)//'`
    full_libdir=`echo "$full_libdir_root/$full_libdir_end" | sed 's/\/$//'`
fi


full_libdir_p=`cd $conf_root; pwd`
case "${full_libdir_p}" in
    /tmp_mnt/*)
	full_libdir_p_tmp_mnt=`echo ${full_libdir_p} | sed 's/^\/tmp_mnt\///'`
	test -d "/${full_libdir_p_tmp_mnt}" && full_libdir_p="/${full_libdir_p_tmp_mnt}"
	;;
esac

full_libdir_p="$full_libdir_p/lib/$ARCH"


if test -z "$option_load_dir"; then
    LOADPATH="$libdir"
    loaddir="$libdir"
else
    LOADPATH="$option_load_dir:$libdir"
    loaddir="$option_load_dir"
fi



if test "$enable_min_space" != "yes"; then
    DOT=
    TOUCH_PROXY=
    MINSPACE_RM=:
else
    DOT='.'
    TOUCH_PROXY='&& touch $@'
    MINSPACE_RM="rm -f"
fi






if test -d glish/clients/glishtk/pgplot; then
    subdirs="glish/clients/make glish/clients/glishtk/pgplot "

fi

if test -n "$option_pgplot_link_search"; then
    PGPLOTLINKSEARCH="$option_pgplot_link_search"
    BUILD_PGPLOT="BUILD_PGPLOT"
else
    PGPLOTLINKSEARCH=""
    if test -z "$option_pgplot_incl_flags" -a -z "$option_pgplot_link_flags"; then
	if test "$enable_pgplot" == "yes"; then
	    BUILD_PGPLOT="BUILD_PGPLOT"
	else
	    BUILD_PGPLOT=""
	fi
    else
	BUILD_PGPLOT="BUILD_PGPLOT"
    fi
fi

if test -n "$option_extra_link_libs"; then
    EXTRA_LIBS="$option_extra_link_libs"
fi


# Extract the first word of "gcc", so it can be a program name with args.
set dummy gcc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CC="gcc"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

if test -z "$CC"; then
  # Extract the first word of "cc", so it can be a program name with args.
set dummy cc; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_CC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CC"; then
  ac_cv_prog_CC="$CC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  ac_prog_rejected=no
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      if test "$ac_dir/$ac_word" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
	continue
      fi
      ac_cv_prog_CC="cc"
      break
    fi
  done
  IFS="$ac_save_ifs"
if test $ac_prog_rejected = yes; then
  # We found a bogon in the path, so make sure we never use it.
  set dummy $ac_cv_prog_CC
  shift
  if test $# -gt 0; then
    # We chose a different compiler from the bogus one.
    # However, it has the same basename, so the bogon will be chosen
    # first if we set CC to just the basename; use the full file name.
    shift
    set dummy "$ac_dir/$ac_word" "$@"
    shift
    ac_cv_prog_CC="$@"
  fi
fi
fi
fi
CC="$ac_cv_prog_CC"
if test -n "$CC"; then
  echo "$ac_t""$CC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

  test -z "$CC" && { echo "configure: error: no acceptable cc found in \$PATH" 1>&2; exit 1; }
fi

echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_gcc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.c <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CC-cc} -E $conftest.c'; { (eval echo configure:1078: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gcc=yes
else
  ac_cv_prog_gcc=no
fi
fi

echo "$ac_t""$ac_cv_prog_gcc" 1>&6
if test $ac_cv_prog_gcc = yes; then
  GCC=yes
  if test "${CFLAGS+set}" != set; then
    echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_gcc_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > $conftest.c
if test -z "`${CC-cc} -g -c $conftest.c 2>&1`"; then
  ac_cv_prog_gcc_g=yes
else
  ac_cv_prog_gcc_g=no
fi
rm -f $conftest*

fi

echo "$ac_t""$ac_cv_prog_gcc_g" 1>&6
    if test $ac_cv_prog_gcc_g = yes; then
      CFLAGS="-g -O"
    else
      CFLAGS="-O"
    fi
  fi
else
  GCC=
  test "${CFLAGS+set}" = set || CFLAGS="-g"
fi


echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&6
# On Suns, sometimes $CPP names a directory.
if test -n "$CPP" && test -d "$CPP"; then
  CPP=
fi
if test -z "$CPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    # This must be in double quotes, not single quotes, because CPP may get
  # substituted into the Makefile and "${CC-cc}" will confuse make.
  CPP="${CC-cc} -E"
  # On the NeXT, cc -E runs the code through the compiler's parser,
  # not just through cpp.
  cat > $conftest.$ac_ext <<EOF
#line 1131 "configure"
#include "$confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:1137: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  CPP="${CC-cc} -E -traditional-cpp"
  cat > $conftest.$ac_ext <<EOF
#line 1146 "configure"
#include "$confdefs.h"
#include <assert.h>
Syntax Error
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:1152: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  CPP=/lib/cpp
fi
rm -f $conftest*
fi
rm -f $conftest*
  ac_cv_prog_CPP="$CPP"
fi
  CPP="$ac_cv_prog_CPP"
else
  ac_cv_prog_CPP="$CPP"
fi
echo "$ac_t""$CPP" 1>&6

echo $ac_n "checking for AIX""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 1174 "configure"
#include "$confdefs.h"
#ifdef _AIX
  yes
#endif

EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf $conftest*
  cat >> $confdefs.h <<\EOF
#define _ALL_SOURCE 1
EOF

AIX=yes
else
  rm -rf $conftest*
  AIX=no
fi
rm -f $conftest*

echo "$ac_t""$AIX" 1>&6
if test "$AIX" '=' 'yes'; then
    AIXpp="$AIX"
fi

echo $ac_n "checking for __alpha""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 1202 "configure"
#include "$confdefs.h"
#ifdef __alpha
  yes
#else
#ifdef __alpha__
  yes
#endif
#endif

EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf $conftest*
  ALPHA=yes
else
  rm -rf $conftest*
  ALPHA=no
fi
rm -f $conftest*

echo "$ac_t""$ALPHA" 1>&6
echo $ac_n "checking for working const""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_c_const'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 1229 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {

/* Ultrix mips cc rejects this.  */
typedef int charset[2]; const charset x;
/* SunOS 4.1.1 cc rejects this.  */
char const *const *ccp;
char **p;
/* NEC SVR4.0.2 mips cc rejects this.  */
struct point {int x, y;};
static struct point const zero = {0,0};
/* AIX XL C 1.02.0.0 rejects this.
   It does not let you subtract one const X* pointer from another in an arm
   of an if-expression whose if-part is not a constant expression */
const char *g = "string";
ccp = &g + (g ? g-g : 0);
/* HPUX 7.0 cc rejects these. */
++ccp;
p = (char**) ccp;
ccp = (char const *const *) p;
{ /* SCO 3.2v4 cc rejects this.  */
  char *t;
  char const *s = 0 ? (char *) 0 : (char const *) 0;

  *t++ = 0;
}
{ /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
  int x[] = {25, 17};
  const int *foo = &x[0];
  ++foo;
}
{ /* Sun SC1.0 ANSI compiler rejects this -- but not the above. */
  typedef const int *iptr;
  iptr p = 0;
  ++p;
}
{ /* AIX XL C 1.02.0.0 rejects this saying
     "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
  struct s { int j; const int *ap[3]; };
  struct s *b; b->j = 5;
}
{ /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
  const int foo = 10;
}

; return 0; }
EOF
if { (eval echo configure:1279: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf $conftest*
  ac_cv_c_const=yes
else
  rm -rf $conftest*
  ac_cv_c_const=no
fi
rm -f $conftest*

fi

echo "$ac_t""$ac_cv_c_const" 1>&6
if test $ac_cv_c_const = no; then
  cat >> $confdefs.h <<\EOF
#define const 
EOF

fi

for ac_prog in $CCC c++ g++ gcc CC cxx
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_CXX'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$CXX"; then
  ac_cv_prog_CXX="$CXX" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_CXX="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
CXX="$ac_cv_prog_CXX"
if test -n "$CXX"; then
  echo "$ac_t""$CXX" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$CXX" && break
done
test -n "$CXX" || CXX="gcc"


echo $ac_n "checking whether we are using GNU C++""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_gxx'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.C <<EOF
#ifdef __GNUC__
  yes;
#endif
EOF
if { ac_try='${CXX-g++} -E $conftest.C'; { (eval echo configure:1341: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep yes >/dev/null 2>&1; then
  ac_cv_prog_gxx=yes
else
  ac_cv_prog_gxx=no
fi
fi

echo "$ac_t""$ac_cv_prog_gxx" 1>&6
if test $ac_cv_prog_gxx = yes; then
  GXX=yes
  if test "${CXXFLAGS+set}" != set; then
    echo $ac_n "checking whether ${CXX-g++} accepts -g""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_gxx_g'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  echo 'void f(){}' > $conftest.cc
if test -z "`${CXX-g++} -g -c $conftest.cc 2>&1`"; then
  ac_cv_prog_gxx_g=yes
else
  ac_cv_prog_gxx_g=no
fi
rm -f $conftest*

fi

echo "$ac_t""$ac_cv_prog_gxx_g" 1>&6
    if test $ac_cv_prog_gxx_g = yes; then
      CXXFLAGS="-g -O"
    else
      CXXFLAGS="-O"
    fi
  fi
else
  GXX=
  test "${CXXFLAGS+set}" = set || CXXFLAGS="-g"
fi
if test $ac_cv_prog_gxx = yes; then
echo $ac_n "checking whether we are using EGCS C++""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_egcs_gxx'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if { ac_try='${CXX-g++} --version'; { (eval echo configure:1382: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }; } | egrep -i egcs >/dev/null 2>&1; then
  ac_cv_prog_egcs_gxx=yes
else
  ac_cv_prog_egcs_gxx=no
fi
fi

echo "$ac_t""$ac_cv_prog_egcs_gxx" 1>&6
else
  ac_cv_prog_egcs_gxx=no
fi

# Find a good install program.  We prefer a C program (faster),
# so one script is as good as another.  But avoid the broken or
# incompatible versions:
# SysV /etc/install, /usr/sbin/install
# SunOS /usr/etc/install
# IRIX /sbin/install
# AIX /bin/install
# AFS /usr/afsws/bin/install, which mishandles nonexistent args
# SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
# ./install, which can be erroneously created by make from ./install.sh.
echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&6
if test -z "$INSTALL"; then
if eval "test \"`echo '$''{'ac_cv_path_install_glish'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
    IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    # Account for people who put trailing slashes in PATH elements.
    case "$ac_dir/" in
    /|./|.//|/etc/*|/usr/sbin/*|/usr/etc/*|/sbin/*|/usr/afsws/bin/*|/usr/ucb/*) ;;
    *)
      # OSF1 and SCO ODT 3.0 have their own names for install.
      for ac_prog in ginstall installbsd scoinst install; do
        if test -f $ac_dir/$ac_prog; then
	  if test $ac_prog = install &&
            grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
	    # AIX install.  It has an incompatible calling convention.
	    # OSF/1 installbsd also uses dspmsg, but is usable.
	    :
	  else
	    ac_cv_path_install_glish="$ac_dir/$ac_prog -c"
	    break 2
	  fi
	fi
      done
      ;;
    esac
  done
  IFS="$ac_save_ifs"

fi
  if test "${ac_cv_path_install_glish+set}" = set; then
    INSTALL="$ac_cv_path_install_glish"
  else
    # As a last resort, use the slow shell script.  We don't cache a
    # path for INSTALL within a source directory, because that will
    # break other packages using the cache if that directory is
    # removed, or if the path is relative.
    INSTALL="$ac_install_sh"
  fi
fi
echo "$ac_t""$INSTALL" 1>&6

# Use test -z because SunOS4 sh mishandles braces in ${var-val}.
# It thinks the first close brace ends the variable substitution.
test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'

test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'

# Extract the first word of "ranlib", so it can be a program name with args.
set dummy ranlib; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_RANLIB'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RANLIB"; then
  ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RANLIB="ranlib"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
fi
fi
RANLIB="$ac_cv_prog_RANLIB"
if test -n "$RANLIB"; then
  echo "$ac_t""$RANLIB" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

for ac_prog in 'bison -y' byacc
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_YACC'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$YACC"; then
  ac_cv_prog_YACC="$YACC" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_YACC="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
YACC="$ac_cv_prog_YACC"
if test -n "$YACC"; then
  echo "$ac_t""$YACC" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$YACC" && break
done
test -n "$YACC" || YACC="yacc"

# Extract the first word of "remsh", so it can be a program name with args.
set dummy remsh; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_RSH'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$RSH"; then
  ac_cv_prog_RSH="$RSH" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_RSH="remsh"
      break
    fi
  done
  IFS="$ac_save_ifs"
  test -z "$ac_cv_prog_RSH" && ac_cv_prog_RSH="rsh"
fi
fi
RSH="$ac_cv_prog_RSH"
if test -n "$RSH"; then
  echo "$ac_t""$RSH" 1>&6
else
  echo "$ac_t""no" 1>&6
fi


if test "$enable_os_malloc" = "yes"; then
	MALLOC=""
	echo $ac_n "checking for -lmalloc""... $ac_c" 1>&6
ac_lib_var=`echo malloc'_'main | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lmalloc  $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 1553 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {
main()
; return 0; }
EOF
if { (eval echo configure:1561: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  	  ac_tr_lib=HAVE_LIB`echo $1 | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
	  	  cat >> $confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

	  BIN_LIBS="-lmalloc"
	
else
  echo "$ac_t""no" 1>&6
fi

else
	MALLOC="malloc.o"
fi


# If we cannot run a trivial program, we must be cross compiling.
echo $ac_n "checking whether cross-compiling""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_c_cross'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  ac_cv_c_cross=yes
else
cat > $conftest.$ac_ext <<EOF
#line 1599 "configure"
#include "$confdefs.h"
main(){return(0);}
EOF
{ (eval echo configure:1603: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }
if test -s $conftest && (./$conftest; exit) 2>/dev/null; then
  ac_cv_c_cross=no
else
  ac_cv_c_cross=yes
fi
fi
rm -fr $conftest*
fi

echo "$ac_t""$ac_cv_c_cross" 1>&6
cross_compiling=$ac_cv_c_cross

echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_header_stdc'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 1621 "configure"
#include "$confdefs.h"
#include <stdlib.h>
#include <stdarg.h>
#include <string.h>
#include <float.h>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:1629: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  rm -rf $conftest*
  ac_cv_header_stdc=yes
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  ac_cv_header_stdc=no
fi
rm -f $conftest*

if test $ac_cv_header_stdc = yes; then
  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
cat > $conftest.$ac_ext <<EOF
#line 1644 "configure"
#include "$confdefs.h"
#include <string.h>
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "memchr" >/dev/null 2>&1; then
  :
else
  rm -rf $conftest*
  ac_cv_header_stdc=no
fi
rm -f $conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
cat > $conftest.$ac_ext <<EOF
#line 1662 "configure"
#include "$confdefs.h"
#include <stdlib.h>
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "free" >/dev/null 2>&1; then
  :
else
  rm -rf $conftest*
  ac_cv_header_stdc=no
fi
rm -f $conftest*

fi

if test $ac_cv_header_stdc = yes; then
  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
if test "$cross_compiling" = yes; then
  :
else
cat > $conftest.$ac_ext <<EOF
#line 1683 "configure"
#include "$confdefs.h"
#include <ctype.h>
#define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
#define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
int main () { int i; for (i = 0; i < 256; i++)
if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
exit (0); }

EOF
{ (eval echo configure:1694: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }
if test -s $conftest && (./$conftest; exit) 2>/dev/null; then
  :
else
  ac_cv_header_stdc=no
fi
fi
rm -fr $conftest*
fi
fi

echo "$ac_t""$ac_cv_header_stdc" 1>&6
if test $ac_cv_header_stdc = yes; then
  cat >> $confdefs.h <<\EOF
#define STDC_HEADERS 1
EOF

fi

echo $ac_n "checking for sys/wait.h that is POSIX.1 compatible""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_header_sys_wait_h'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 1718 "configure"
#include "$confdefs.h"
#include <sys/types.h>
#include <sys/wait.h>
#ifndef WEXITSTATUS
#define WEXITSTATUS(stat_val) ((unsigned)(stat_val) >> 8)
#endif
#ifndef WIFEXITED
#define WIFEXITED(stat_val) (((stat_val) & 255) == 0)
#endif
int main() { return 0; }
int t() {
int s;
wait (&s);
s = WIFEXITED (s) ? WEXITSTATUS (s) : 1;
; return 0; }
EOF
if { (eval echo configure:1735: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf $conftest*
  ac_cv_header_sys_wait_h=yes
else
  rm -rf $conftest*
  ac_cv_header_sys_wait_h=no
fi
rm -f $conftest*

fi

echo "$ac_t""$ac_cv_header_sys_wait_h" 1>&6
if test $ac_cv_header_sys_wait_h = yes; then
  cat >> $confdefs.h <<\EOF
#define HAVE_SYS_WAIT_H 1
EOF

fi

for ac_hdr in libc.h sys/filio.h X11/fd.h sys/select.h sigLib.h unistd.h sys/uio.h limits.h float.h machine/fpu.h stropts.h sys/signal.h fp.h sys/time.h stdlib.h dirent.h termio.h termios.h sys/shm.h siginfo.h ucontext.h floatingpoint.h malloc.h mach-o/dyld.h crt_externs.h
do
ac_safe=`echo "$ac_hdr" | tr './\055' '___'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 1762 "configure"
#include "$confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:1767: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  rm -rf $conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f $conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | tr 'abcdefghijklmnopqrstuvwxyz./\055' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ___'`
  cat >> $confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking for FlexLexer.h""... $ac_c" 1>&6
HAVE_FLEXLEXER_H=0
HAVE_FLEXLEXER_H_result=no
flexpath=`type flex | sed 's/^.* //'`

if test -n "$flexpath"; then
    flexinclude=`echo $flexpath | sed 's@/flex$@@'`
    while test -d "$flexinclude"; do
        if test -f "$flexinclude/include/FlexLexer.h"; then
	    HAVE_FLEXLEXER_H=1
	    HAVE_FLEXLEXER_H_result=yes
	    break
        fi
	flexinclude=`echo $flexinclude | sed 's@/[^/]*$@@'`
    done
fi


echo "$ac_t""$HAVE_FLEXLEXER_H_result" 1>&6

HAVE_YY_CHAR_result=no
if test "$HAVE_FLEXLEXER_H" = "1"; then
    if test -n "$flexinclude"; then
        echo $ac_n "checking for YY_CHAR""... $ac_c" 1>&6
        cat > $conftest.$ac_ext <<EOF
#line 1817 "configure"
#include "$confdefs.h"
#include <$flexinclude/include/FlexLexer.h>
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "YY_CHAR" >/dev/null 2>&1; then
  rm -rf $conftest*
  cat >> $confdefs.h <<\EOF
#define HAVE_YY_CHAR 1
EOF

			HAVE_YY_CHAR_result=yes
fi
rm -f $conftest*

	echo "$ac_t""$HAVE_YY_CHAR_result" 1>&6
    fi
fi


echo $ac_n "checking for pid_t""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_type_pid_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 1842 "configure"
#include "$confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#endif
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "pid_t" >/dev/null 2>&1; then
  rm -rf $conftest*
  ac_cv_type_pid_t=yes
else
  rm -rf $conftest*
  ac_cv_type_pid_t=no
fi
rm -f $conftest*

fi
echo "$ac_t""$ac_cv_type_pid_t" 1>&6
if test $ac_cv_type_pid_t = no; then
  cat >> $confdefs.h <<\EOF
#define pid_t int
EOF

fi

echo $ac_n "checking for size_t""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_type_size_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 1873 "configure"
#include "$confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#endif
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "size_t" >/dev/null 2>&1; then
  rm -rf $conftest*
  ac_cv_type_size_t=yes
else
  rm -rf $conftest*
  ac_cv_type_size_t=no
fi
rm -f $conftest*

fi
echo "$ac_t""$ac_cv_type_size_t" 1>&6
if test $ac_cv_type_size_t = no; then
  cat >> $confdefs.h <<\EOF
#define size_t unsigned
EOF

fi

echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_type_signal'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 1904 "configure"
#include "$confdefs.h"
#include <sys/types.h>
#include <signal.h>
#ifdef signal
#undef signal
#endif
#ifdef __cplusplus
extern "C" void (*signal (int, void (*)(int)))(int);
#else
void (*signal ()) ();
#endif

int main() { return 0; }
int t() {
int i;
; return 0; }
EOF
if { (eval echo configure:1922: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf $conftest*
  ac_cv_type_signal=void
else
  rm -rf $conftest*
  ac_cv_type_signal=int
fi
rm -f $conftest*

fi

echo "$ac_t""$ac_cv_type_signal" 1>&6
cat >> $confdefs.h <<EOF
#define RETSIGTYPE $ac_cv_type_signal
EOF


echo $ac_n "checking for malloc_t""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_type_malloc_t'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 1944 "configure"
#include "$confdefs.h"
#include <sys/types.h>
#if STDC_HEADERS
#include <stdlib.h>
#endif
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "malloc_t" >/dev/null 2>&1; then
  rm -rf $conftest*
  ac_cv_type_malloc_t=yes
else
  rm -rf $conftest*
  ac_cv_type_malloc_t=no
fi
rm -f $conftest*

fi
echo "$ac_t""$ac_cv_type_malloc_t" 1>&6
if test $ac_cv_type_malloc_t = no; then
  cat >> $confdefs.h <<\EOF
#define malloc_t void*
EOF

fi


echo $ac_n "checking for -lm""... $ac_c" 1>&6
ac_lib_var=`echo m'_'main | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lm  $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 1979 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {
main()
; return 0; }
EOF
if { (eval echo configure:1987: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo m | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> $confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lm $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for -lbsd""... $ac_c" 1>&6
ac_lib_var=`echo bsd'_'main | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lbsd  $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 2019 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {
main()
; return 0; }
EOF
if { (eval echo configure:2027: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo bsd | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> $confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lbsd $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for -lsocket""... $ac_c" 1>&6
ac_lib_var=`echo socket'_'main | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lsocket  $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 2059 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {
main()
; return 0; }
EOF
if { (eval echo configure:2067: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo socket | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> $confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lsocket $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for -linet""... $ac_c" 1>&6
ac_lib_var=`echo inet'_'main | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-linet  $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 2099 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {
main()
; return 0; }
EOF
if { (eval echo configure:2107: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo inet | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> $confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-linet $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for -lnsl""... $ac_c" 1>&6
ac_lib_var=`echo nsl'_'main | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lnsl  $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 2139 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {
main()
; return 0; }
EOF
if { (eval echo configure:2147: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo nsl | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> $confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  LIBS="-lnsl $LIBS"

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for -lpthread""... $ac_c" 1>&6
ac_lib_var=`echo pthread'_'main | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lpthread  $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 2179 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {
main()
; return 0; }
EOF
if { (eval echo configure:2187: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_lib=HAVE_LIB`echo $1 | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> $confdefs.h <<EOF
#define $ac_tr_lib 1
EOF

  GLIBS="-lpthread $GLIBS"

else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for vprintf""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_vprintf'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 2217 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char vprintf(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char vprintf();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_vprintf) || defined (__stub___vprintf)
choke me
#else
vprintf();
#endif

; return 0; }
EOF
if { (eval echo configure:2241: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_vprintf=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_vprintf=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'vprintf`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> $confdefs.h <<\EOF
#define HAVE_VPRINTF 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

if test "$ac_cv_func_vprintf" != yes; then
echo $ac_n "checking for _doprnt""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func__doprnt'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 2267 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char _doprnt(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char _doprnt();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub__doprnt) || defined (__stub____doprnt)
choke me
#else
_doprnt();
#endif

; return 0; }
EOF
if { (eval echo configure:2291: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func__doprnt=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func__doprnt=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'_doprnt`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> $confdefs.h <<\EOF
#define HAVE_DOPRNT 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

fi

for ac_func in gethostname waitpid strdup setsockopt random lrand48 flock lockf sigprocmask uname tcgetattr sigfpe
do
echo $ac_n "checking for $ac_func""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_$ac_func'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 2320 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char $ac_func(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char $ac_func();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_$ac_func) || defined (__stub___$ac_func)
choke me
#else
$ac_func();
#endif

; return 0; }
EOF
if { (eval echo configure:2344: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_$ac_func=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_$ac_func=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_func=HAVE_`echo $ac_func | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
  cat >> $confdefs.h <<EOF
#define $ac_tr_func 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


echo $ac_n "checking for writev""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_writev'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 2372 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char writev(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char writev();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_writev) || defined (__stub___writev)
choke me
#else
writev();
#endif

; return 0; }
EOF
if { (eval echo configure:2396: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_writev=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_writev=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'writev`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
cat >> $confdefs.h <<\EOF
#define HAVE_WRITEV 1
EOF

echo $ac_n "checking for writev declaration""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 2415 "configure"
#include "$confdefs.h"
#include <sys/uio.h>
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "writev" >/dev/null 2>&1; then
  rm -rf $conftest*
  echo "$ac_t""present" 1>&6
else
  rm -rf $conftest*
  
    echo "$ac_t""missing" 1>&6
    cat >> $confdefs.h <<\EOF
#define WRITEV_NOT_DECLARED 1
EOF

fi
rm -f $conftest*


else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for setrlimit""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_setrlimit'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 2445 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char setrlimit(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char setrlimit();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_setrlimit) || defined (__stub___setrlimit)
choke me
#else
setrlimit();
#endif

; return 0; }
EOF
if { (eval echo configure:2469: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_setrlimit=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_setrlimit=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'setrlimit`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
cat >> $confdefs.h <<\EOF
#define HAVE_SETRLIMIT 1
EOF

echo $ac_n "checking for setrlimit declaration""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 2488 "configure"
#include "$confdefs.h"

#include <sys/time.h>
#include <sys/resource.h>
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "setrlimit" >/dev/null 2>&1; then
  rm -rf $conftest*
  echo "$ac_t""present" 1>&6
else
  rm -rf $conftest*
  
    echo "$ac_t""missing" 1>&6
    cat >> $confdefs.h <<\EOF
#define SETRLIMIT_NOT_DECLARED 1
EOF

fi
rm -f $conftest*


else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for shmget""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_shmget'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 2520 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char shmget(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmget();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shmget) || defined (__stub___shmget)
choke me
#else
shmget();
#endif

; return 0; }
EOF
if { (eval echo configure:2544: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_shmget=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_shmget=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'shmget`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
cat >> $confdefs.h <<\EOF
#define HAVE_SHMGET 1
EOF

echo $ac_n "checking for shmget declaration""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 2563 "configure"
#include "$confdefs.h"
#include <sys/shm.h>
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "shmget" >/dev/null 2>&1; then
  rm -rf $conftest*
  echo "$ac_t""present" 1>&6
else
  rm -rf $conftest*
  
    echo "$ac_t""missing" 1>&6
    cat >> $confdefs.h <<\EOF
#define SHMGET_NOT_DECLARED 1
EOF

fi
rm -f $conftest*


else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for select declaration""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 2590 "configure"
#include "$confdefs.h"
#include <sys/types.h>
#ifdef HAVE_SYS_SELECT_H
#include <sys/select.h>
#endif
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#endif
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "select" >/dev/null 2>&1; then
  rm -rf $conftest*
  echo "$ac_t""present" 1>&6
else
  rm -rf $conftest*
  
    echo "$ac_t""missing" 1>&6
    cat >> $confdefs.h <<\EOF
#define SELECT_NOT_DECLARED 1
EOF

fi
rm -f $conftest*


echo $ac_n "checking for shmget""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_shmget'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 2621 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char shmget(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char shmget();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_shmget) || defined (__stub___shmget)
choke me
#else
shmget();
#endif

; return 0; }
EOF
if { (eval echo configure:2645: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_shmget=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_shmget=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'shmget`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
cat >> $confdefs.h <<\EOF
#define HAVE_SHMGET 1
EOF

echo $ac_n "checking for shmget declaration""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 2664 "configure"
#include "$confdefs.h"
#include <sys/shm.h>
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "shmget" >/dev/null 2>&1; then
  rm -rf $conftest*
  echo "$ac_t""present" 1>&6
else
  rm -rf $conftest*
  
    echo "$ac_t""missing" 1>&6
    cat >> $confdefs.h <<\EOF
#define SHMGET_NOT_DECLARED 1
EOF

fi
rm -f $conftest*


else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking for -ldl""... $ac_c" 1>&6
ac_lib_var=`echo dl'_'dlopen | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ldl  $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 2697 "configure"
#include "$confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char dlopen();

int main() { return 0; }
int t() {
dlopen()
; return 0; }
EOF
if { (eval echo configure:2709: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  have_dl=yes; dl_lib="-ldl"
else
  echo "$ac_t""no" 1>&6
have_dl=no; dl_lib=""
fi



echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_c_bigendian'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_cv_c_bigendian=unknown
# See if sys/param.h defines the BYTE_ORDER macro.
cat > $conftest.$ac_ext <<EOF
#line 2737 "configure"
#include "$confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() { return 0; }
int t() {

#if !BYTE_ORDER || !BIG_ENDIAN || !LITTLE_ENDIAN
 bogus endian macros
#endif
; return 0; }
EOF
if { (eval echo configure:2749: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf $conftest*
  # It does; now see whether it defined to BIG_ENDIAN or not.
cat > $conftest.$ac_ext <<EOF
#line 2753 "configure"
#include "$confdefs.h"
#include <sys/types.h>
#include <sys/param.h>
int main() { return 0; }
int t() {

#if BYTE_ORDER != BIG_ENDIAN
 not big endian
#endif
; return 0; }
EOF
if { (eval echo configure:2765: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf $conftest*
  ac_cv_c_bigendian=yes
else
  rm -rf $conftest*
  ac_cv_c_bigendian=no
fi
rm -f $conftest*

fi
rm -f $conftest*

if test $ac_cv_c_bigendian = unknown; then
if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
cat > $conftest.$ac_ext <<EOF
#line 2782 "configure"
#include "$confdefs.h"
main () {
  /* Are we little or big endian?  From Harbison&Steele.  */
  union
  {
    long l;
    char c[sizeof (long)];
  } u;
  u.l = 1;
  exit (u.c[sizeof (long) - 1] == 1);
}
EOF
{ (eval echo configure:2795: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }
if test -s $conftest && (./$conftest; exit) 2>/dev/null; then
  ac_cv_c_bigendian=no
else
  ac_cv_c_bigendian=yes
fi
fi
rm -fr $conftest*
fi
fi

echo "$ac_t""$ac_cv_c_bigendian" 1>&6
if test $ac_cv_c_bigendian = yes; then
  cat >> $confdefs.h <<\EOF
#define WORDS_BIGENDIAN 1
EOF

fi

echo $ac_n "checking for sendmsg""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_sendmsg'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 2819 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char sendmsg(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char sendmsg();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_sendmsg) || defined (__stub___sendmsg)
choke me
#else
sendmsg();
#endif

; return 0; }
EOF
if { (eval echo configure:2843: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_sendmsg=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_sendmsg=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'sendmsg`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
echo $ac_n "checking stream creation""... $ac_c" 1>&6
if test "$cross_compiling" = yes; then
    { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
else
cat > $conftest.$ac_ext <<EOF
#line 2861 "configure"
#include "$confdefs.h"

#include <stdio.h>
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif
#ifdef HAVE_STDLIB_H
#include <stdlib.h>
#endif
#ifdef HAVE_STROPTS_H
#include <stropts.h>
#endif

main() {
    int io[2];

    if ( pipe( io ) < 0 )
	return 1;
    if ( ioctl( io[1], I_SENDFD, fileno(stdout) ) < 0 )
	return 1;

    return 0;
}
EOF
{ (eval echo configure:2886: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }
if test -s $conftest && (./$conftest; exit) 2>/dev/null; then
  echo "$ac_t""pipe" 1>&6
else
  
echo "$ac_t""socketpair" 1>&6
cat >> $confdefs.h <<\EOF
#define HAVE_STREAMLESS_PIPE 1
EOF

echo $ac_n "checking BSD Reno""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 2898 "configure"
#include "$confdefs.h"

#include <sys/socket.h>
#include <sys/un.h>

EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "msg_flags" >/dev/null 2>&1; then
  rm -rf $conftest*
  cat > $conftest.$ac_ext <<EOF
#line 2909 "configure"
#include "$confdefs.h"

#include <sys/socket.h>
#include <sys/un.h>

EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "cmsghdr" >/dev/null 2>&1; then
  rm -rf $conftest*
  cat >> $confdefs.h <<\EOF
#define HAVE_BSD_RENO 1
EOF

echo "$ac_t""yes" 1>&6
else
  rm -rf $conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f $conftest*

else
  rm -rf $conftest*
  echo "$ac_t""no" 1>&6
fi
rm -f $conftest*


fi
fi
rm -fr $conftest*
else
  echo "$ac_t""no" 1>&6
fi



if test -z "$NO_AUTH" && test -d npd && test -f npd/config.h.in; then
    GLISH_FLAGS="$GLISH_FLAGS -DAUTHENTICATE"
    NPD_LIB='${LIBDIR_P}/libnpd${NPD_SUFFIX}'
    do_npd='yes'
    BUILD_NPD="BUILD_NPD"
    USENPD='1'
    
    if test -z "$option_key_dir"; then
        KEYDIR="${sharedstatedir}/glish/keys"
	while :
do
    case "${KEYDIR}" in
	*\$\{*\}*) KEYDIR=`eval "echo ${KEYDIR}"` ;;
	*) break ;;
    esac
done
KEYDIR_rel_path=`echo ${KEYDIR} | sed 's/^\([\.\/]*\).*/\1/'`
KEYDIR_rel_path=`echo $KEYDIR_rel_path | sed -e 's/\/\.\//\//' -e 's/^\.\///' -e 's/\/\.$//' -e 's/\/$//'`
if test -n "$KEYDIR_rel_path"; then
    KEYDIR_root=`cd $KEYDIR_rel_path; pwd`
    case "${KEYDIR_root}" in
    /tmp_mnt/*)
	KEYDIR_root_tmp_mnt=`echo ${KEYDIR_root} | sed 's/^\/tmp_mnt\///'`
	test -d "/${KEYDIR_root_tmp_mnt}" && KEYDIR_root="/${KEYDIR_root_tmp_mnt}"
	;;
esac

    KEYDIR_end=`echo ${KEYDIR} | sed 's/^\([\.\/]*\)//'`
    KEYDIR=`echo "$KEYDIR_root/$KEYDIR_end" | sed 's/\/$//'`
fi

    else
	KEYDIR="$option_key_dir"
    fi
    
else
    BUILD_NPD=""
    USENPD='0'
    NPD_LIB=""
    do_npd='no'
    
fi


if test -z "$NO_TK"; then

            
    #--------------------------------------------------------------------
    #	Derived from the Tk configure.in...
    #
    #	Locate the X11 header files and the X11 library archive.  Try
    #	the ac_path_x macro first, but if it doesn't find the X stuff
    #	(e.g. because there's no xmkmf program) then check through
    #	a list of possible directories.  Under some conditions the
    #	autoconf macro will return an include directory that contains
    #	no include files, so double-check its result just to be safe.
    #--------------------------------------------------------------------
    # If we find X, set shell vars x_includes and x_libraries to the
# paths, otherwise set no_x=yes.
# Uses ac_ vars as temps to allow command line to override cache and checks.
# --without-x overrides everything else, but does not touch the cache.
echo $ac_n "checking for X""... $ac_c" 1>&6

# Check whether --with-x or --without-x was given.
if test "${with_x+set}" = set; then
  withval="$with_x"
  :
fi

# $have_x is `yes', `no', `disabled', or empty when we do not yet know.
if test "x$with_x" = xno; then
  # The user explicitly disabled X.
  have_x=disabled
else
  if test "x$x_includes" != xNONE && test "x$x_libraries" != xNONE; then
    # Both variables are already set.
    have_x=yes
  else
if eval "test \"`echo '$''{'ac_cv_have_x'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  # One or both of the vars are not set, and there is no cached value.
ac_x_includes=NO ac_x_libraries=NO
rm -fr $conftest.dir
if mkdir $conftest.dir; then
  cd $conftest.dir
  # Make sure to not put "make" in the Imakefile rules, since we grep it out.
  cat > Imakefile <<'EOF'
acfindx:
	@echo 'ac_im_incroot="${INCROOT}"; ac_im_usrlibdir="${USRLIBDIR}"; ac_im_libdir="${LIBDIR}"'
EOF
  if (xmkmf) >/dev/null 2>/dev/null && test -f Makefile; then
    # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
    # Sometimes MAKEFLAGS can screw things up...
    eval `MAKEFLAGS='';export MAKEFLAGS;${MAKE-make} acfindx 2>/dev/null | grep -v make`
    # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
    for ac_extension in a so sl; do
      if test ! -f $ac_im_usrlibdir/libX11.$ac_extension &&
        test -f $ac_im_libdir/libX11.$ac_extension; then
        ac_im_usrlibdir=$ac_im_libdir; break
      fi
    done
    # Screen out bogus values from the imake configuration.
    case "$ac_im_incroot" in
	/usr/include) ;;
	*) test -f "$ac_im_incroot/X11/Xos.h" && ac_x_includes="$ac_im_incroot" ;;
    esac
    case "$ac_im_usrlibdir" in
	/usr/lib | /lib) ;;
	*) test -d "$ac_im_usrlibdir" && ac_x_libraries="$ac_im_usrlibdir" ;;
    esac
  fi
  cd ..
  rm -fr $conftest.dir
fi

if test "$ac_x_includes" = NO; then
  # Guess where to find include files, by looking for this one X11 .h file.
  test -z "$x_direct_test_include" && x_direct_test_include=X11/Intrinsic.h

  # First, try using that file with no special directory specified.
cat > $conftest.$ac_ext <<EOF
#line 3068 "configure"
#include "$confdefs.h"
#include <$x_direct_test_include>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:3073: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  rm -rf $conftest*
  # We can compile using X headers with no special include directory.
ac_x_includes=
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  # Look for the header file in a standard set of common directories.
  for ac_dir in               \
    /usr/X11R6/include        \
    /usr/X11R5/include        \
    /usr/X11R4/include        \
                              \
    /usr/include/X11R6        \
    /usr/include/X11R5        \
    /usr/include/X11R4        \
                              \
    /usr/local/X11R6/include  \
    /usr/local/X11R5/include  \
    /usr/local/X11R4/include  \
                              \
    /usr/local/include/X11R6  \
    /usr/local/include/X11R5  \
    /usr/local/include/X11R4  \
                              \
    /usr/X11/include          \
    /usr/include/X11          \
    /usr/local/X11/include    \
    /usr/local/include/X11    \
                              \
    /usr/X386/include         \
    /usr/x386/include         \
    /usr/XFree86/include/X11  \
                              \
    /usr/include              \
    /usr/local/include        \
    /usr/unsupported/include  \
    /usr/athena/include       \
    /usr/local/x11r5/include  \
    /usr/lpp/Xamples/include  \
                              \
    /usr/openwin/include      \
    /usr/openwin/share/include \
    ; \
  do
    if test -r "$ac_dir/$x_direct_test_include"; then
      ac_x_includes=$ac_dir
      break
    fi
  done
fi
rm -f $conftest*
fi # $ac_x_includes = NO

if test "$ac_x_libraries" = NO; then
  # Check for the libraries.

  test -z "$x_direct_test_library" && x_direct_test_library=Xt
  test -z "$x_direct_test_function" && x_direct_test_function=XtMalloc

  # See if we find them without any special options.
  # Don't add to $LIBS permanently.
  ac_save_LIBS="$LIBS"
  LIBS="-l$x_direct_test_library $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 3140 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {
${x_direct_test_function}()
; return 0; }
EOF
if { (eval echo configure:3148: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  LIBS="$ac_save_LIBS"
# We can link X programs with no special library path.
ac_x_libraries=
else
  rm -rf $conftest*
  LIBS="$ac_save_LIBS"
# First see if replacing the include by lib works.
for ac_dir in `echo "$ac_x_includes" | sed s/include/lib/` \
    /usr/X11R6/lib        \
    /usr/X11R5/lib        \
    /usr/X11R4/lib        \
                          \
    /usr/lib/X11R6        \
    /usr/lib/X11R5        \
    /usr/lib/X11R4        \
                          \
    /usr/local/X11R6/lib  \
    /usr/local/X11R5/lib  \
    /usr/local/X11R4/lib  \
                          \
    /usr/local/lib/X11R6  \
    /usr/local/lib/X11R5  \
    /usr/local/lib/X11R4  \
                          \
    /usr/X11/lib          \
    /usr/lib/X11          \
    /usr/local/X11/lib    \
    /usr/local/lib/X11    \
                          \
    /usr/X386/lib         \
    /usr/x386/lib         \
    /usr/XFree86/lib/X11  \
                          \
    /usr/lib              \
    /usr/local/lib        \
    /usr/unsupported/lib  \
    /usr/athena/lib       \
    /usr/local/x11r5/lib  \
    /usr/lpp/Xamples/lib  \
                          \
    /usr/openwin/lib      \
    /usr/openwin/share/lib \
    ; \
do
  for ac_extension in a so sl; do
    if test -r $ac_dir/lib${x_direct_test_library}.$ac_extension; then
      ac_x_libraries=$ac_dir
      break 2
    fi
  done
done
fi
rm -f $conftest*

fi # $ac_x_libraries = NO

if test "$ac_x_includes" = NO || test "$ac_x_libraries" = NO; then
  # Didn't find X anywhere.  Cache the known absence of X.
  ac_cv_have_x="have_x=no"
else
  # Record where we found X for the cache.
  ac_cv_have_x="have_x=yes \
	        ac_x_includes=$ac_x_includes ac_x_libraries=$ac_x_libraries"
fi
fi
  fi
  eval "$ac_cv_have_x"
fi # $with_x != no

if test "$have_x" != yes; then
  echo "$ac_t""$have_x" 1>&6
  no_x=yes
else
  # If each of the values was on the command line, it overrides each guess.
  test "x$x_includes" = xNONE && x_includes=$ac_x_includes
  test "x$x_libraries" = xNONE && x_libraries=$ac_x_libraries
  # Update the cache value to reflect the command line values.
  ac_cv_have_x="have_x=yes \
		ac_x_includes=$x_includes ac_x_libraries=$x_libraries"
  echo "$ac_t""libraries $x_libraries, headers $x_includes" 1>&6
fi

    not_really_there=""
    if test "$no_x" = ""; then
        if test "$x_includes" = ""; then
    	    cat > $conftest.$ac_ext <<EOF
#line 3236 "configure"
#include "$confdefs.h"
#include <X11/XIntrinsic.h>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:3241: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  not_really_there="yes"
fi
rm -f $conftest*
        else
    	if test ! -r $x_includes/X11/Intrinsic.h; then
    	    not_really_there="yes"
    	fi
        fi
    fi
    
    if test "$no_x" = "yes" -o "$not_really_there" = "yes"; then
        echo $ac_n "checking for X11 header files""... $ac_c" 1>&6
        XINCLUDES="# no special path needed"
        cat > $conftest.$ac_ext <<EOF
#line 3262 "configure"
#include "$confdefs.h"
#include <X11/Intrinsic.h>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:3267: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  XINCLUDES="nope"
fi
rm -f $conftest*
        if test "$XINCLUDES" = nope; then
            dirs="/usr/unsupported/include /usr/local/include /opt/local/include /usr/X386/include /usr/include/X11R4 /usr/X11R5/include /usr/include/X11R5 /opt/local/X11R5/include /opt/local/X11R4/include /usr/openwin/include /usr/X11/include /opt/local/X11/include /usr/sww/include"
            for i in $dirs ; do
    	    if test -r $i/X11/Intrinsic.h; then
    	        XINCLUDES=" -I$i"
		x_includes="$i"
                break
    	    fi
            done
        fi
        echo "$ac_t""$x_includes" 1>&6
    else
        if test "$x_includes" != ""; then
    	XINCLUDES=-I$x_includes
        else
    	XINCLUDES="# no special path needed"
        fi
    fi

    if test "$XINCLUDES" = nope; then
      echo "configure: warning: couldn't find any X11 include files." 1>&2
      XINCLUDES="# no include files found"
    fi
    
    if test "$no_x" = yes; then
        echo $ac_n "checking for X11 libraries""... $ac_c" 1>&6
        XLIBSW=nope
        if test "$XLIBSW" = nope; then
        dirs="/usr/unsupported/lib /usr/local/lib /opt/local/lib /usr/X386/lib /usr/lib/X11R4 /usr/X11R5/lib /usr/lib/X11R5 /opt/local/X11R5/lib /opt/local/X11R4/lib /usr/openwin/lib /usr/X11/lib /opt/local/X11/lib /usr/sww/lib"
    	for i in $dirs ; do
    	    if test -r $i/libX11.a; then
    		XLIBSW="-L$i -lX11"
                x_libraries="$i"
    	    fi
    	done
        fi
	echo "$ac_t""$x_libraries" 1>&6
    else
        if test "$x_libraries" = ""; then
    	XLIBSW=-lX11
        else
    	XLIBSW="-L$x_libraries -lX11"
        fi
    fi
    if test "$XLIBSW" = nope ; then
        echo $ac_n "checking for -lXwindow""... $ac_c" 1>&6
ac_lib_var=`echo Xwindow'_'XCreateWindow | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-lXwindow  $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 3330 "configure"
#include "$confdefs.h"
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char XCreateWindow();

int main() { return 0; }
int t() {
XCreateWindow()
; return 0; }
EOF
if { (eval echo configure:3342: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  XLIBSW=-lXwindow
else
  echo "$ac_t""no" 1>&6
fi

    fi
    if test "$XLIBSW" = nope ; then
        echo "configure: warning: couldn't find X11 libraries.  Using -lX11." 1>&2
        XLIBSW=-lX11
    fi


                if test -z "$option_tcl_libraries"; then

        for ac_prog in tclsh tclsh8.4 tclsh8.3 tclsh8.2 tclsh8.1 tclsh8.0 tclsh7.6 tclsh7.5 tclsh7.4 tclsh7.3 tcl expect moat 
do
# Extract the first word of "$ac_prog", so it can be a program name with args.
set dummy $ac_prog; ac_word=$2
echo $ac_n "checking for $ac_word""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_prog_TCLSH'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test -n "$TCLSH"; then
  ac_cv_prog_TCLSH="$TCLSH" # Let the user override the test.
else
  IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
  for ac_dir in $PATH; do
    test -z "$ac_dir" && ac_dir=.
    if test -f $ac_dir/$ac_word; then
      ac_cv_prog_TCLSH="$ac_prog"
      break
    fi
  done
  IFS="$ac_save_ifs"
fi
fi
TCLSH="$ac_cv_prog_TCLSH"
if test -n "$TCLSH"; then
  echo "$ac_t""$TCLSH" 1>&6
else
  echo "$ac_t""no" 1>&6
fi

test -n "$TCLSH" && break
done

        if test -n "$TCLSH"; then
            echo $ac_n "checking for tcl version""... $ac_c" 1>&6
            tcl_ext=`echo 'puts stdout [info tclversion]' | $TCLSH`
            echo "$ac_t""$tcl_ext" 1>&6
            echo $ac_n "checking for tcl lib path""... $ac_c" 1>&6
            tcl_path=`echo 'puts stdout [info library]' | $TCLSH | sed 's/\/lib\/.*$/\/lib/'`
            echo "$ac_t""$tcl_path" 1>&6
        fi

    else

        echo $ac_n "checking for tcl lib path""... $ac_c" 1>&6
        tcl_path="$option_tcl_libraries"
        echo "$ac_t""$tcl_path" 1>&6
    fi        

    ##
    ## Find libraries, first try the path we got from tclsh (or command line flag)
    ##
    if test -n "$tcl_path"; then
        saved_LDFLAGS="$LDFLAGS"
        LDFLAGS="-L$tcl_path $LDFLAGS"
        for g in `ls -1 $tcl_path/libtcl* 2> /dev/null | egrep 'tcl[0-9.]' | \
                  sed -e 's/^.*\/libtcl/tcl/' -e 's/\.[a-z][a-z]*$//' | sort -u -r`; do
            tcle=`echo $g | sed 's/^tcl//'`
            echo $ac_n "checking for -ltcl$tcle""... $ac_c" 1>&6
ac_lib_var=`echo tcl$tcle'_'main | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltcl$tcle $dl_lib $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 3434 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {
main()
; return 0; }
EOF
if { (eval echo configure:3442: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
                for f in `ls -1 $tcl_path/libtk* 2> /dev/null | egrep 'tk[0-9.]' | \
                          sed -e 's/^.*\/libtk/tk/' -e 's/\.[a-z][a-z]*$//' | sort -u -r`; do
                    ext=`echo $f | sed 's/^tk//'`
                    echo $ac_n "checking for -ltk$ext""... $ac_c" 1>&6
ac_lib_var=`echo tk$ext'_'main | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltk$ext -ltcl$tcle $XLIBSW $dl_lib $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 3467 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {
main()
; return 0; }
EOF
if { (eval echo configure:3475: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
                        tcl_lib="-L$tcl_path -ltk$ext -ltcl$tcle"
                        tcl_library="$tcl_path"
                        saved_LIBS="$LIBS"
                        LIBS="-ltcl$tcle $LIBS $dl_lib"
                        echo $ac_n "checking for Tcl_GetStringResult""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_Tcl_GetStringResult'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 3498 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char Tcl_GetStringResult(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char Tcl_GetStringResult();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_Tcl_GetStringResult) || defined (__stub___Tcl_GetStringResult)
choke me
#else
Tcl_GetStringResult();
#endif

; return 0; }
EOF
if { (eval echo configure:3522: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_Tcl_GetStringResult=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_Tcl_GetStringResult=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'Tcl_GetStringResult`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

                        LIBS="$saved_LIBS"
                        break
else
  echo "$ac_t""no" 1>&6
tcl_lib=""
fi

                done
else
  echo "$ac_t""no" 1>&6
tcl_lib=""
fi

            if test -n "$tcl_lib"; then
                break
            fi
        done
        LDFLAGS="$saved_LDFLAGS"
    fi

    ##
    ## if we couldn't find the tcl library using tclsh, look a little harder
    ##
    if test -z "$tcl_lib"; then
        dirs="/usr/lib /usr/local/lib /opt/local/lib /usr/local/tcl/lib /opt/local/tcl/lib /usr/unsupported/lib /usr/unsupported/tcl/lib /usr/sww/lib /usr/sww/tcl/lib /loc/lib /loc/tcl/lib /Volumes/aips/sw/lib"
        saved_LDFLAGS="$LDFLAGS"
        for i in $dirs ; do
            LDFLAGS="-L$i $saved_LDFLAGS"
            for g in `ls -1 $i/libtcl* 2> /dev/null | egrep 'tcl[0-9.]' | \
                      sed -e 's/^.*\/libtcl/tcl/' -e 's/\.[a-z.][a-z.]*$//' | sort -u -r`; do
                tcle=`echo $g | sed 's/^tcl//'`
                for f in `ls -1 $i/libtk* 2> /dev/null | grep -v tkx | egrep 'tk[0-9.]' | \
                          sed -e 's/^.*\/libtk/tk/' -e 's/\.[a-z.][a-z.]*$//' | sort -u -r`; do
                    ext=`echo $f | sed 's/^tk//'`
                    ac_lib_var=`echo tk$ext'_'main | tr './+\055' '__p_'`
if eval "test \"`echo '$''{ac_cv_lib_'$ac_lib_var'+set}'`\" != set"; then
    echo $ac_n "checking again ""... $ac_c" 1>&6
        eval "unset ac_cv_lib_$ac_lib_var"
fi
echo $ac_n "checking for -ltk$ext""... $ac_c" 1>&6
ac_lib_var=`echo tk$ext'_'main | tr './+\055' '__p_'`
if eval "test \"`echo '$''{'ac_cv_lib_$ac_lib_var'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_save_LIBS="$LIBS"
LIBS="-ltk$ext -ltcl$tcle $XLIBSW $dl_lib $LIBS"
cat > $conftest.$ac_ext <<EOF
#line 3586 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {
main()
; return 0; }
EOF
if { (eval echo configure:3594: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=yes"
else
  rm -rf $conftest*
  eval "ac_cv_lib_$ac_lib_var=no"
fi
rm -f $conftest*
LIBS="$ac_save_LIBS"

fi
if eval "test \"`echo '$ac_cv_lib_'$ac_lib_var`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  tcl_lib="-L$i -ltk$ext -ltcl$tcle"
                        tcl_library="$i"
                        saved_LIBS="$LIBS"
                        LIBS="-ltcl$tcle $LIBS $dl_lib"
                        echo $ac_n "checking for Tcl_GetStringResult""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_Tcl_GetStringResult'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 3616 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char Tcl_GetStringResult(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char Tcl_GetStringResult();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_Tcl_GetStringResult) || defined (__stub___Tcl_GetStringResult)
choke me
#else
Tcl_GetStringResult();
#endif

; return 0; }
EOF
if { (eval echo configure:3640: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_Tcl_GetStringResult=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_Tcl_GetStringResult=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'Tcl_GetStringResult`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

                        LIBS="$saved_LIBS"
                        break
else
  echo "$ac_t""no" 1>&6
tcl_lib=""
fi


                done
                if test -n "$tcl_lib"; then
                    break
                fi
            done
            if test -n "$tcl_lib"; then
                break
            fi
        done
        LDFLAGS="$saved_LDFLAGS"
        echo $ac_n "checking for tcl library""... $ac_c" 1>&6
        if test -z "$tcl_lib"; then
            echo "$ac_t""couldn't find it" 1>&6
        else
            echo "$ac_t""$tcl_library" 1>&6
	    tcl_path=$tcl_library
        fi

    fi

    ##
    ## Find includes
    ##
    tcl_base=`echo $tcl_path | sed 's/\/lib$//'`

    echo $ac_n "checking for tcl include path""... $ac_c" 1>&6
    if test -z "$option_tcl_includes"; then

        if test -n "$tcl_base"; then
            saved_CPPFLAGS="$CPPFLAGS"
            CPPFLAGS="-I$tcl_base/include $CPPFLAGS"
            cat > $conftest.$ac_ext <<EOF
#line 3697 "configure"
#include "$confdefs.h"
#include <tcl.h>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:3702: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  rm -rf $conftest*
  
                tcl_incl="-I$tcl_base/include"
                tcl_inclp="$tcl_base/include"
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  tcl_incl=""; tcl_inclp=""
fi
rm -f $conftest*
            CPPFLAGS="$saved_CPPFLAGS"
        else
            cat > $conftest.$ac_ext <<EOF
#line 3718 "configure"
#include "$confdefs.h"
#include <tcl.h>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:3723: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  rm -rf $conftest*
  tcl_inclp="no extra path needed"
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  tcl_inclp=""
fi
rm -f $conftest*
        fi

        if test -z "$tcl_inclp"; then
            dirs="/usr/include /usr/local/include /opt/local/include /usr/local/tcl/include /opt/local/tcl/include /usr/unsupported/include /usr/unsupported/tcl/include /usr/sww/include /usr/sww/tcl/include /loc/include /loc/tcl/include"
            for i in $dirs ; do
                if test -r $i/tcl.h; then
                    tcl_incl="-I$i"
                    tcl_inclp="$i"
                    break
                fi
            done
        fi

        if test -z "$tcl_inclp"; then
            echo "$ac_t""couldn't find it" 1>&6
        else
            echo "$ac_t""$tcl_inclp" 1>&6
        fi

    else

        tcl_incl="-I$option_tcl_includes"
	tcl_inclp="$option_tcl_includes"
        echo "$ac_t""$tcl_inclp" 1>&6

    fi

    if test -z "$tcl_lib"; then
        XLIBSW=""
        XINCLUDES=""
        TK_LIB=""
        TK_FLAGS=""
        do_tk='no'
        TK_INCL=""
        x_includes=""
        x_libraries=""
    else
        TK_INCL="$tcl_incl"
        TK_LIB="$tcl_lib"
        do_tk='yes'
    fi
else
    XLIBSW=""
    XINCLUDES=""
    TK_LIB=""
    do_tk='no'
   T K_INCL=""
    x_includes=""
    x_libraries=""
fi



echo $ac_n "checking for BSDgettimeofday""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_BSDgettimeofday'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 3792 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char BSDgettimeofday(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char BSDgettimeofday();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_BSDgettimeofday) || defined (__stub___BSDgettimeofday)
choke me
#else
BSDgettimeofday();
#endif

; return 0; }
EOF
if { (eval echo configure:3816: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_BSDgettimeofday=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_BSDgettimeofday=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'BSDgettimeofday`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> $confdefs.h <<\EOF
#define HAVE_BSDGETTIMEOFDAY 1
EOF

else
  echo "$ac_t""no" 1>&6
echo $ac_n "checking for gettimeofday""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_gettimeofday'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 3839 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char gettimeofday(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char gettimeofday();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_gettimeofday) || defined (__stub___gettimeofday)
choke me
#else
gettimeofday();
#endif

; return 0; }
EOF
if { (eval echo configure:3863: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_gettimeofday=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_gettimeofday=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'gettimeofday`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
echo $ac_n "checking for gettimeofday declaration""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 3878 "configure"
#include "$confdefs.h"
#include <sys/time.h>
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "gettimeofday" >/dev/null 2>&1; then
  rm -rf $conftest*
  echo "$ac_t""present" 1>&6
else
  rm -rf $conftest*
  
    no_gettod_decl="1"
    echo "$ac_t""missing" 1>&6
    cat >> $confdefs.h <<\EOF
#define GETTOD_NOT_DECLARED 1
EOF


fi
rm -f $conftest*

else
  echo "$ac_t""no" 1>&6
cat >> $confdefs.h <<\EOF
#define NO_GETTOD 1
EOF

fi

fi



if test "$AIX" = yes; then
    if test "$ac_cv_prog_gxx" != yes; then
        CXXFLAGS="$CXXFLAGS -+"
    fi
    CFLAGS="$CFLAGS -D_ALL_SOURCE"
    CXXFLAGS="$CXXFLAGS -D_ALL_SOURCE"
fi

if test "$ALPHA" = yes; then
    ALTCC="/bin/cc -ieee"
    ARCH_OBJ="alpha.o"
else
    ALTCC="$CC"
    ARCH_OBJ=""
fi



ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS $conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o $conftest $CXXFLAGS $CPPFLAGS $LDFLAGS $conftest.$ac_ext $LIBS 1>&5'

echo $ac_n "checking C++ details""... $ac_c" 1>&6
echo "$ac_t""" 1>&6

echo $ac_n "checking how to run the C++ preprocessor""... $ac_c" 1>&6
if test -z "$CXXCPP"; then
if eval "test \"`echo '$''{'ac_cv_prog_CXXCPP'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS $conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o $conftest $CXXFLAGS $CPPFLAGS $LDFLAGS $conftest.$ac_ext $LIBS 1>&5'
  CXXCPP="${CXX-g++} -E"
  cat > $conftest.$ac_ext <<EOF
#line 3950 "configure"
#include "$confdefs.h"
#include <stdlib.h>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:3955: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  :
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  CXXCPP=/lib/cpp
fi
rm -f $conftest*
  ac_cv_prog_CXXCPP="$CXXCPP"
fi
fi
CXXCPP="$ac_cv_prog_CXXCPP"
echo "$ac_t""$CXXCPP" 1>&6


echo $ac_n "checking C++ library path""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 3974 "configure"
#include "$confdefs.h"
#include <iostream.h>
EOF
cxx_include_path=`(eval "$ac_cpp $conftest.$ac_ext") 2>&5 | egrep "/iostream\.h" 2>/dev/null | head -1`
if test -n "cxx_include_path"; then
  :
fi
rm -f $conftest*

if `echo $cxx_include_path | sed 's/\/[^/]*include\//X/' > /dev/null 2>&1`; then
    ##
    ## must handle lines like:
    ##
    ##    # 1 "/opt/local/compilers/gcc-2.7.2.3/lib/g++-include/iostream.h" 1 3
    ##
    cxx_library_path=`echo $cxx_include_path | sed -e 's/^[^\/]*//' -e 's/\/[^/]*include\/.*/\/lib/' -e 's/\/lib\/.*/\/lib/' -e 's/\n$//'`
fi
echo "$ac_t""$cxx_library_path" 1>&6
if test -n "$cxx_library_path" -a "$cxx_library_path" '!=' '/usr/lib'; then
    cxx_lpath="-L$cxx_library_path"
    cxx_rpath=":$cxx_library_path"
fi

echo $ac_n "checking Are we using the KAI compiler""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 4000 "configure"
#include "$confdefs.h"
#ifdef __KCC
  yes
#endif

EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "yes" >/dev/null 2>&1; then
  rm -rf $conftest*
  KAI=yes
else
  rm -rf $conftest*
  KAI=no
fi
rm -f $conftest*

echo "$ac_t""$KAI" 1>&6

for ac_hdr in osfcn.h iostream.h
do
ac_safe=`echo "$ac_hdr" | tr './\055' '___'`
echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 4027 "configure"
#include "$confdefs.h"
#include <$ac_hdr>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:4032: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  rm -rf $conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f $conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
    ac_tr_hdr=HAVE_`echo $ac_hdr | tr 'abcdefghijklmnopqrstuvwxyz./\055' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ___'`
  cat >> $confdefs.h <<EOF
#define $ac_tr_hdr 1
EOF
 
else
  echo "$ac_t""no" 1>&6
fi
done


if test -n "$no_gettod_decl"; then
echo $ac_n "checking for gettimeofday declaration (c++)""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 4060 "configure"
#include "$confdefs.h"
#include <sys/time.h>
EOF
if (eval "$ac_cpp $conftest.$ac_ext") 2>&5 |
  egrep "gettimeofday" >/dev/null 2>&1; then
  rm -rf $conftest*
  echo "$ac_t""present" 1>&6
else
  rm -rf $conftest*
  
    echo "$ac_t""missing" 1>&6
    cat >> $confdefs.h <<\EOF
#define GETTOD_NOT_DECLARED_CXX 1
EOF


fi
rm -f $conftest*

fi

saved_CPPFLAGS="$CPPFLAGS"
CPPFLAGS="$tcl_incl"
echo $ac_n "checking for const argv in Tcl_CmdProc""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 4086 "configure"
#include "$confdefs.h"
#include <tcl.h>
int main() { return 0; }
int t() {
extern void foo( Tcl_CmdProc* );
extern int foocb( ClientData, Tcl_Interp *, int, const char *[] );
foo(foocb);

; return 0; }
EOF
if { (eval echo configure:4097: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf $conftest*
  echo "$ac_t""const" 1>&6; cat >> $confdefs.h <<\EOF
#define GTKCONST const
EOF

else
  rm -rf $conftest*
  echo "$ac_t""non const" 1>&6; cat >> $confdefs.h <<\EOF
#define GTKCONST 
EOF

fi
rm -f $conftest*

CPPFLAGS="$saved_CPPFLAGS"

ac_safe=`echo "vfork.h" | tr './\055' '___'`
echo $ac_n "checking for vfork.h""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 4120 "configure"
#include "$confdefs.h"
#include <vfork.h>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:4125: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  rm -rf $conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f $conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  cat >> $confdefs.h <<\EOF
#define HAVE_VFORK_H 1
EOF

else
  echo "$ac_t""no" 1>&6
fi

echo $ac_n "checking for working vfork""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_vfork'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  if test "$cross_compiling" = yes; then
  echo $ac_n "checking for vfork""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_vfork'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 4157 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char vfork(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif
/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char vfork();

int main() { return 0; }
int t() {

/* The GNU C library defines this for functions which it implements
    to always fail with ENOSYS.  Some functions are actually named
    something starting with __ and the normal name is an alias.  */
#if defined (__stub_vfork) || defined (__stub___vfork)
choke me
#else
vfork();
#endif

; return 0; }
EOF
if { (eval echo configure:4184: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_vfork=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_vfork=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'vfork`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  :
else
  echo "$ac_t""no" 1>&6
fi

else
cat > $conftest.$ac_ext <<EOF
#line 4203 "configure"
#include "$confdefs.h"
#ifdef __cplusplus
extern "C" void exit(int);
#endif
/* Thanks to Paul Eggert for this test.  */
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#ifdef HAVE_UNISTD_H
#include <unistd.h>
#endif
#ifdef HAVE_VFORK_H
#include <vfork.h>
#endif
/* On some sparc systems, changes by the child to local and incoming
   argument registers are propagated back to the parent.
   The compiler is told about this with #include <vfork.h>,
   but some compilers (e.g. gcc -O) don't grok <vfork.h>.
   Test for this by using a static variable whose address
   is put into a register that is clobbered by the vfork.  */
static
#ifdef __cplusplus
sparc_address_test (int arg)
#else
sparc_address_test (arg) int arg;
#endif
{
  static pid_t child;
  if (!child) {
    child = vfork ();
    if (child < 0)
      perror ("vfork");
    if (!child) {
      arg = getpid();
      write(-1, "", 0);
      _exit (arg);
    }
  }
}
main() {
  pid_t parent = getpid ();
  pid_t child;

  sparc_address_test (1);

  child = vfork ();

  if (child == 0) {
    /* Here is another test for sparc vfork register problems.
       This test uses lots of local variables, at least
       as many local variables as main has allocated so far
       including compiler temporaries.  4 locals are enough for
       gcc 1.40.3 on a Solaris 4.1.3 sparc, but we use 8 to be safe.
       A buggy compiler should reuse the register of parent
       for one of the local variables, since it will think that
       parent can't possibly be used any more in this routine.
       Assigning to the local variable will thus munge parent
       in the parent process.  */
    pid_t
      p = getpid(), p1 = getpid(), p2 = getpid(), p3 = getpid(),
      p4 = getpid(), p5 = getpid(), p6 = getpid(), p7 = getpid();
    /* Convince the compiler that p..p7 are live; otherwise, it might
       use the same hardware register for all 8 local variables.  */
    if (p != p1 || p != p2 || p != p3 || p != p4
	|| p != p5 || p != p6 || p != p7)
      _exit(1);

    /* On some systems (e.g. IRIX 3.3),
       vfork doesn't separate parent from child file descriptors.
       If the child closes a descriptor before it execs or exits,
       this munges the parent's descriptor as well.
       Test for this by closing stdout in the child.  */
    _exit(close(fileno(stdout)) != 0);
  } else {
    int status;
    struct stat st;

    while (wait(&status) != child)
      ;
    exit(
	 /* Was there some problem with vforking?  */
	 child < 0

	 /* Did the child fail?  (This shouldn't happen.)  */
	 || status

	 /* Did the vfork/compiler bug occur?  */
	 || parent != getpid()

	 /* Did the file descriptor bug occur?  */
	 || fstat(fileno(stdout), &st) != 0
	 );
  }
}
EOF
{ (eval echo configure:4299: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }
if test -s $conftest && (./$conftest; exit) 2>/dev/null; then
  ac_cv_func_vfork=yes
else
  ac_cv_func_vfork=no
fi
fi
rm -fr $conftest*
fi

echo "$ac_t""$ac_cv_func_vfork" 1>&6
if test $ac_cv_func_vfork = no; then
  cat >> $confdefs.h <<\EOF
#define vfork fork
EOF

fi


echo $ac_n "checking for environ""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_func_environ'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 4323 "configure"
#include "$confdefs.h"
/* System header to define __stub macros and hopefully few prototypes,
    which can conflict with char environ(); below.  */
#include <assert.h>
/* Override any gcc2 internal prototype to avoid an error.  */
#ifdef __cplusplus
extern "C"
#endif


int strlen( char* );
#ifdef __cplusplus
extern "C"
#endif

/* We use char because int might match the return type of a gcc2
    builtin and then its argument prototype would still apply.  */
char* environ;

int main() { return 0; }
int t() {

strlen( environ );

; return 0; }
EOF
if { (eval echo configure:4350: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  eval "ac_cv_func_environ=yes"
else
  rm -rf $conftest*
  eval "ac_cv_func_environ=no"
fi
rm -f $conftest*

fi
if eval "test \"`echo '$ac_cv_func_'environ`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
cat >> $confdefs.h <<\EOF
#define HAVE_ENVIRON 1
EOF

echo $ac_n "checking for environ declaration""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 4369 "configure"
#include "$confdefs.h"

#include <stdlib.h>
#include <unistd.h>

int main() { return 0; }
int t() {

char **foo = environ;

; return 0; }
EOF
if { (eval echo configure:4382: \"$ac_link\") 1>&5; (eval $ac_link) 2>&5; }; then
  rm -rf $conftest*
  echo "$ac_t""present" 1>&6
else
  rm -rf $conftest*
  
    echo "$ac_t""missing" 1>&6
    cat >> $confdefs.h <<\EOF
#define ENVIRON_NOT_DECLARED 1
EOF

fi
rm -f $conftest*


else
  echo "$ac_t""no" 1>&6
fi


echo $ac_n "checking 'for' scope""... $ac_c" 1>&6
cat > $conftest.$ac_ext <<EOF
#line 4404 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {

for ( int i=0; i < 1; i++ ) { ; }
for ( int i=0; i < 1; i++ ) { ; }

; return 0; }
EOF
if { (eval echo configure:4415: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf $conftest*
  echo "$ac_t""local" 1>&6; cat >> $confdefs.h <<\EOF
#define LOOPDECL int
EOF

else
  rm -rf $conftest*
  echo "$ac_t""non-local" 1>&6; cat >> $confdefs.h <<\EOF
#define LOOPDECL 
EOF

fi
rm -f $conftest*


echo $ac_n "checking select parameters""... $ac_c" 1>&6
for type in fd_set int long; do
cat > $conftest.$ac_ext <<EOF
#line 4434 "configure"
#include "$confdefs.h"
#include <sys/types.h>
#ifdef HAVE_SYS_SELECT_H
#include <sys/select.h>
#endif
#ifdef HAVE_SYS_TIME_H
#include <sys/time.h>
#endif
int main() { return 0; }
int t() {
$type rm;
select(0, &rm, 0, 0, 0);
; return 0; }
EOF
if { (eval echo configure:4449: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  rm -rf $conftest*
  select_type=$type
else
  rm -rf $conftest*
  select_type=''
fi
rm -f $conftest*

if test -n "$select_type"; then
    break;
fi
done
if test -z "$select_type"; then
    select_type=void
fi
echo "$ac_t""$select_type" 1>&6
cat >> $confdefs.h <<EOF
#define SELECT_MASK_TYPE $select_type
EOF


if test "$ac_cv_prog_egcs_gxx" = yes; then
    CXXFLAGS="$CXXFLAGS -D__EGCS__"
fi

ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS $conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o $conftest $CFLAGS $CPPFLAGS $LDFLAGS $conftest.$ac_ext $LIBS 1>&5'



   ##	Derived from the Tk configure.in...

if test -z "$host_os"; then
    
# Make sure we can run config.sub.
if $ac_config_sub sun4 >/dev/null 2>&1; then :
else { echo "configure: error: can not run $ac_config_sub" 1>&2; exit 1; }
fi

echo $ac_n "checking host system type""... $ac_c" 1>&6

host_alias=$host
case "$host_alias" in
NONE)
  case $nonopt in
  NONE)
    if host_alias=`$ac_config_guess`; then :
    else { echo "configure: error: can not guess host type; you must specify one" 1>&2; exit 1; }
    fi ;;
  *) host_alias=$nonopt ;;
  esac ;;
esac

host=`$ac_config_sub $host_alias`
host_cpu=`echo $host | sed 's/^\([^-][^-]*\)-\([^-][^-]*\)-\([^-][^-]*\).*/\1/'`
host_vendor=`echo $host | sed 's/^\([^-][^-]*\)-\([^-][^-]*\)-\([^-][^-]*\).*/\2/'`
host_os=`echo $host | sed 's/^\([^-][^-]*\)-\([^-][^-]*\)-\([^-][^-]*\).*/\3/'`
echo "$ac_t""$host" 1>&6

fi

GLISH_SLIB_SUFFIX=""
GLISH_LIB_SUFFIX=""
LIB_VERSIONS_OK=ok
SLIB_CXXFLAGS=""
GLISH_LD_SEARCH=""
TK_LD_RPATH=""
RPATH_PREFIX="-L"
TK_CXX_RPATH=""
GC_LOW_OPT=""
GC_MACH_DEP=""
MACH_SYSINFO=sysinfo/stub.cc

LINK_LIBGLISHTK="-lglishtk"
LINK_LIBGLISHP="-lglishp${GLISH_SLIB_VERSION}"
LINK_LIBGLISH="-lglish${GLISH_SLIB_VERSION}"
LINK_LIBSOS="-lsos${SOS_SLIB_VERSION}"
LINK_LIBEDIT="-ledit${EDITLINE_SLIB_VERSION}"
LINK_LIBREGX="-lregx${REGX_SLIB_VERSION}"
LINK_LIBNPD="-lnpd${NPD_SLIB_VERSION}"

LINK_LIBGLISH_interp=$LINK_LIBGLISH

case $host_os in
    aix*)
	SLIB_CFLAGS=""
	SLIB_LD="\$(top)/config/ldAix g++ -shared -Wl,-bhalt:4 -Wl,-bM:SRE -Wl,-bE:lib.exp -Wl,-H512 -Wl,-T512 -Wl,-bnoentry"
#	SLIB_LD_LIBS='${LIBS} -L/homes/aips2mgr/local/lib -lgcc_s -lstdc++ -lc -lX11'
	SLIB_LD_LIBS='${LIBS} -lX11'
	SLIB_SUFFIX=".so"

	LINK_LIBGLISHTK='-Wl,-bI:${LIBDIR_P}/libglishtk.exp'
	LINK_LIBGLISHP='$(INTERP_OBJS)'
	LINK_LIBGLISH='-Wl,-bI:${LIBDIR_P}/libglish.exp'
	LINK_LIBGLISH_interp='${LIBDIR_P}/libglish.a'
	LINK_LIBSOS='-Wl,-bI:${LIBDIR_P}/libsos.exp'
	LINK_LIBEDIT='-Wl,-bI:${LIBDIR_P}/libedit.exp'
	LINK_LIBREGX='-Wl,-bI:${LIBDIR_P}/libregx.exp'
	LINK_LIBNPD='-Wl,-bI:${LIBDIR_P}/libnpd.exp'

	SLIB_LABEL=''

	LIBS="$LIBS -lstdc++"

				GLISH_SLIB_SUFFIX=".so"
	SOS_SLIB_SUFFIX=".so"
	NPD_SLIB_SUFFIX=".so"
	EDITLINE_SLIB_SUFFIX=".so"
	REGX_SLIB_SUFFIX=".so"

	tclXlib="$tcl_lib"

	if test -n "$tcl_lib"; then
	    tklib=`echo $tcl_lib | sed 's/.*-ltk\([0-9.]*\).*/tk\1/'`
	    tcllib=`echo $tcl_lib | sed 's/.*-ltcl\([0-9.]*\).*/tcl\1/'`
	fi

	tclXpath=`echo $tcl_path | sed 's/\//\\\\\//g'`
	if test -f "$tcl_path/lib$tcllib.exp"; then
	    tcl_lib=`echo $tcl_lib | sed "s/-l$tcllib[^ ]*/-Wl,-bI:$tclXpath\/lib$tcllib.exp/"`
	fi
	if test -f "$tcl_path/lib$tklib.exp"; then
	    tcl_lib=`echo $tcl_lib | sed "s/-l$tklib[^ ]*/-Wl,-bI:$tclXpath\/lib$tklib.exp/"`
	fi

	if test "$tclXlib" != "$tcl_lib"; then
	    TK_LIB="$tcl_lib"
	fi

	DL_LIBS="-lld"

	LD_FLAGS=""
	GLISH_LD_SEARCH="-L$full_libdir_p $cxx_lpath -L$full_libdir"

	TK_LD_RPATH="-L$full_libdir_p $cxx_lpath -L$full_libdir"
        if test -n "$x_libraries"; then
	    TK_LD_RPATH="$TK_LD_RPATH -L$x_libraries"
	fi
        if test -n "$tcl_library"; then
	    TK_LD_RPATH="$TK_LD_RPATH -L$tcl_library"
	fi
	cat >> $confdefs.h <<\EOF
#define NO_DLFCN_H 1
EOF

##	GLISH_SLIB_SUFFIX='${VERSION}.a'
	GC_MACH_DEP=rs6000_mach_dep.o
	;;
    hpux8.*|hpux9.*)
	SLIB_CFLAGS="+z"
	SLIB_LABEL=''
	SLIB_LD="ld -b"
	SLIB_LD_LIBS='${LIBS}'
	SLIB_SUFFIX=".sl"
	DL_LIBS="-ldld"
	LD_FLAGS="-Wl,-E"
	RPATH_PREFIX="-Wl,+b,"

	if test -z "$static_binary"; then
	    GLISH_LD_SEARCH="-Wl,+b,$full_libdir_p$cxx_rpath:$full_libdir:."
	fi

	TK_LD_RPATH="-Wl,+b,$full_libdir_p$cxx_rpath:$full_libdir"
        
    if test -n "$tcl_library"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,+b,$tcl_library"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$tcl_library"
        fi
    fi

        
    if test -n "$x_libraries"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,+b,$x_libraries"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$x_libraries"
        fi
    fi

        
    if test -n "$PGPLOTLINKSEARCH"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,+b,$PGPLOTLINKSEARCH"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$PGPLOTLINKSEARCH"
        fi
    fi


	if test -n "$TK_LD_RPATH"; then
	    TK_LD_RPATH="$TK_LD_RPATH:."
	fi
	GC_MACH_DEP=mach_dep.o
	
    for tmp_index in glish sos npd editline regx; do
        tmp_suffix=SLIB_SUFFIX
	tmp_id=`echo ${tmp_index}_${tmp_suffix} | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
        if test -f "$tmp_index/change.h"; then
            eval ${tmp_id}="$_cv_version".`cat $tmp_index/change.h | head -1 | sed 's/^[^0-9]*\([0-9][0-9]*\).*/\1/'`
            eval ${tmp_id}=`eval echo \\${${tmp_id}} | sed -e "s/\.//g" -e "s/$/$SLIB_SUFFIX/" `
	else
            eval ${tmp_id}="$_cv_version".0
            eval ${tmp_id}=`eval echo \\${${tmp_id}} | sed -e "s/\.//g" -e "s/$/$SLIB_SUFFIX/" `
        fi
    done

	
    for tmp_index in glish sos npd editline regx; do
        tmp_suffix=SLIB_VERSION 
	tmp_id=`echo ${tmp_index}_${tmp_suffix} | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
        if test -f "$tmp_index/change.h"; then
            eval ${tmp_id}="$_cv_version".`cat $tmp_index/change.h | head -1 | sed 's/^[^0-9]*\([0-9][0-9]*\).*/\1/'`
            eval ${tmp_id}=`eval echo \\${${tmp_id}} | sed -e "s/\.//g"`
	else
            eval ${tmp_id}="$_cv_version".0
            eval ${tmp_id}=`eval echo \\${${tmp_id}} | sed -e "s/\.//g"`
        fi
    done

	MACH_SYSINFO=sysinfo/hpux.cc
	;;
    hpux10.*|hpux11.*)
	SLIB_CFLAGS="+z"
	SLIB_LABEL='+h '
	SLIB_LD="ld -b"
	SLIB_LD_LIBS='${LIBS}'
	SLIB_SUFFIX=".sl"
	DL_LIBS="-ldld"
	LD_FLAGS="-Wl,-E"
	RPATH_PREFIX="-Wl,+b,"

	if test -z "$static_binary"; then
	    GLISH_LD_SEARCH="-Wl,+b,$full_libdir_p$cxx_rpath:$full_libdir:."
	fi

	TK_LD_RPATH="-Wl,+b,$full_libdir_p$cxx_rpath:$full_libdir"
        
    if test -n "$tcl_library"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,+b,$tcl_library"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$tcl_library"
        fi
    fi

        
    if test -n "$x_libraries"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,+b,$x_libraries"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$x_libraries"
        fi
    fi

        
    if test -n "$PGPLOTLINKSEARCH"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,+b,$PGPLOTLINKSEARCH"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$PGPLOTLINKSEARCH"
        fi
    fi


	if test -n "$TK_LD_RPATH"; then
	    TK_LD_RPATH="$TK_LD_RPATH:."
	fi
	GC_MACH_DEP=mach_dep.o
	MACH_SYSINFO=sysinfo/hpux.cc
	;;
    irix4.*)
	SLIB_CFLAGS="-G 0"
	SLIB_SUFFIX="..o"
	SLIB_LD="echo tclLdAout $CC \{$SLIB_CFLAGS\} | `pwd`/tclsh -r -G 0"
	SLIB_LD_LIBS=""
	DL_LIBS=""
	LD_FLAGS="-Wl,-D,08000000"
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""
	GC_MACH_DEP=mips_sgi_mach_dep.o
	MACH_SYSINFO=sysinfo/irix.cc
	;;
    irix5.*)
	SLIB_CFLAGS=""
	SLIB_LABEL='-soname '
	SLIB_LD="ld -shared -rdata_shared"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS=""
	LD_FLAGS=""
	RPATH_PREFIX="-Wl,-rpath,"
	MAKE_LIB="/bin/ar cru"

	if test $ac_cv_prog_gcc != yes; then
	    echo $ac_n "checking application binary interface""... $ac_c" 1>&6
if eval "test \"`echo '$''{'_cv_sgiabi'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
SAVED_CFLAGS="$CFLAGS"
CFLAGS="-show $CFLAGS"
cat > $conftest.$ac_ext <<EOF
#line 4757 "configure"
int main() { return 0; }
EOF
if (eval "${CC-cc} -o $conftest $CFLAGS $CPPFLAGS $LDFLAGS $conftest.$ac_ext $LIBS $conftest.$ac_ext") 2>&1 |
  egrep "\-o32|\-n32|\-64" 2>&5 > $conftest.egp; then
  :
fi
tmp_outv=`cat $conftest.egp`
rm -f $conftest*

CFLAGS="$SAVED_CFLAGS"
_cv_sgiabi=`echo $tmp_outv | tail -1 | sed -e 's/^.*\(-[no]32\).*$/\1/' -e 's/^.*\(-64\).*$/\1/'`
if test "$_cv_sgiabi" != "-o32" -a "$_cv_sgiabi" != "-n32" -a "$_cv_sgiabi" != "-64"; then
    _cv_sgiabi=""
fi
fi

echo "$ac_t""$_cv_sgiabi" 1>&6
	
	    SLIB_LD="$SLIB_LD $_cv_sgiabi"
	fi

	if test -n "$cxx_library_path"; then
	    echo $ac_n "checking C++ library path (again)""... $ac_c" 1>&6
	    case $_cv_sgiabi in
		-n32)
		    if test -d "${cxx_library_path}32"; then
			cxx_library_path="${cxx_library_path}32"
			cxx_lpath="-L$cxx_library_path"
			cxx_rpath=":$cxx_library_path"
		    fi
		    ;;
		-64)
		    if test -d "${cxx_library_path}64"; then
			cxx_library_path="${cxx_library_path}64"
			cxx_lpath="-L$cxx_library_path"
			cxx_rpath=":$cxx_library_path"
		    fi
		    ;;
	    esac
	    echo "$ac_t""$cxx_library_path" 1>&6
	fi

	if test -z "$static_binary"; then
	    GLISH_LD_SEARCH="-Wl,-rpath,$full_libdir_p$cxx_rpath:$full_libdir"
	fi

	TK_LD_RPATH="-Wl,-rpath,$full_libdir_p$cxx_rpath:$full_libdir"
        
    if test -n "$tcl_library"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,-rpath,$tcl_library"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$tcl_library"
        fi
    fi

        
    if test -n "$x_libraries"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,-rpath,$x_libraries"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$x_libraries"
        fi
    fi

        
    if test -n "$PGPLOTLINKSEARCH"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,-rpath,$PGPLOTLINKSEARCH"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$PGPLOTLINKSEARCH"
        fi
    fi


	GC_MACH_DEP=mips_sgi_mach_dep.o
	MACH_SYSINFO=sysinfo/irix.cc
	;;
    irix6.*)
	SLIB_CFLAGS=""
	SLIB_LABEL='-soname '
	SLIB_LD="ld -shared -rdata_shared"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS=""
	LD_FLAGS=""
	RPATH_PREFIX="-rpath "
	MAKE_LIB="/bin/ar cru"

	if test $ac_cv_prog_gcc != yes; then
	    echo $ac_n "checking application binary interface""... $ac_c" 1>&6
if eval "test \"`echo '$''{'_cv_sgiabi'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  
SAVED_CFLAGS="$CFLAGS"
CFLAGS="-show $CFLAGS"
cat > $conftest.$ac_ext <<EOF
#line 4856 "configure"
int main() { return 0; }
EOF
if (eval "${CC-cc} -o $conftest $CFLAGS $CPPFLAGS $LDFLAGS $conftest.$ac_ext $LIBS $conftest.$ac_ext") 2>&1 |
  egrep "\-o32|\-n32|\-64" 2>&5 > $conftest.egp; then
  :
fi
tmp_outv=`cat $conftest.egp`
rm -f $conftest*

CFLAGS="$SAVED_CFLAGS"
_cv_sgiabi=`echo $tmp_outv | tail -1 | sed -e 's/^.*\(-[no]32\).*$/\1/' -e 's/^.*\(-64\).*$/\1/'`
if test "$_cv_sgiabi" != "-o32" -a "$_cv_sgiabi" != "-n32" -a "$_cv_sgiabi" != "-64"; then
    _cv_sgiabi=""
fi
fi

echo "$ac_t""$_cv_sgiabi" 1>&6
	
	    SLIB_LD="$SLIB_LD $_cv_sgiabi"
	    case $_cv_sgiabi in
		-o32)
		    if test -f /usr/lib/c++init.o; then
			SLIB_LD_LIBS=/usr/lib/c++init.o
		    fi
		    ;;
		-n32)
		    if test -f /usr/lib32/c++init.o; then
			SLIB_LD_LIBS=/usr/lib32/c++init.o
		    fi
		    ;;
		-64)
		    if test -f /usr/lib64/c++init.o; then
			SLIB_LD_LIBS=/usr/lib64/c++init.o
		    fi;
	    esac
	fi

	if test -n "$cxx_library_path"; then
	    echo $ac_n "checking C++ library path (again)""... $ac_c" 1>&6
	    case $_cv_sgiabi in
		-n32)
		    if test -d "${cxx_library_path}32"; then
			cxx_library_path="${cxx_library_path}32"
			cxx_lpath="-L$cxx_library_path"
			cxx_rpath=":$cxx_library_path"
		    fi
		    ;;
		-64)
		    if test -d "${cxx_library_path}64"; then
			cxx_library_path="${cxx_library_path}64"
			cxx_lpath="-L$cxx_library_path"
			cxx_rpath=":$cxx_library_path"
		    fi
		    ;;
	    esac
	    echo "$ac_t""$cxx_library_path" 1>&6
	fi

	if test -z "$static_binary"; then
	    GLISH_LD_SEARCH="-rpath $full_libdir_p$cxx_rpath:$full_libdir"
	fi

	TK_LD_RPATH="-rpath $full_libdir_p$cxx_rpath:$full_libdir"
        
    if test -n "$tcl_library"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-rpath $tcl_library"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$tcl_library"
        fi
    fi

        
    if test -n "$x_libraries"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-rpath $x_libraries"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$x_libraries"
        fi
    fi

        
    if test -n "$PGPLOTLINKSEARCH"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-rpath $PGPLOTLINKSEARCH"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$PGPLOTLINKSEARCH"
        fi
    fi


	GC_MACH_DEP=mips_sgi_mach_dep.o
	MACH_SYSINFO=sysinfo/irix.cc
	;;
    linux*)
	SLIB_CFLAGS="-fPIC"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	SLIB_LABEL="-Wl,-h,"
	if test "$have_dl" = yes; then
	    SLIB_LD="$CC -shared"
	    DL_LIBS="-ldl"
	    LD_FLAGS="-rdynamic"
	else
	    ac_safe=`echo "dld.h" | tr './\055' '___'`
echo $ac_n "checking for dld.h""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 4967 "configure"
#include "$confdefs.h"
#include <dld.h>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:4972: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  rm -rf $conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f $conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
		SLIB_LD="ld -shared"
		DL_LIBS="-ldld"
		LD_FLAGS=""
else
  echo "$ac_t""no" 1>&6
fi

	fi
	RPATH_PREFIX="-Wl,-rpath,"
						DL_LIBS="$DL_LIBS -lc"
	if test -z "$static_binary"; then
	    GLISH_LD_SEARCH="-Wl,-rpath,$full_libdir_p$cxx_rpath:$full_libdir"
	fi

	TK_LD_RPATH="-Wl,-rpath,$full_libdir_p$cxx_rpath:$full_libdir"
        
    if test -n "$tcl_library"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,-rpath,$tcl_library"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$tcl_library"
        fi
    fi

        
    if test -n "$x_libraries"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,-rpath,$x_libraries"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$x_libraries"
        fi
    fi

        
    if test -n "$PGPLOTLINKSEARCH"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,-rpath,$PGPLOTLINKSEARCH"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$PGPLOTLINKSEARCH"
        fi
    fi

	GC_MACH_DEP=mach_dep.o
	MACH_SYSINFO=sysinfo/linux.cc
	;;
    MP-RAS-02*)
	SLIB_CFLAGS="-K PIC"
	SLIB_LD="cc -G"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS="-ldl"
	LD_FLAGS=""
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""
	GC_MACH_DEP=mach_dep.o
	;;
    MP-RAS-*)
	SLIB_CFLAGS="-K PIC"
	SLIB_LD="cc -G"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS="-ldl"
	LD_FLAGS="-Wl,-Bexport"
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""
	GC_MACH_DEP=mach_dep.o
	;;
    netbsd*|freebsd*)
	# Not available on all versions:  check for include file.
	ac_safe=`echo "dlfcn.h" | tr './\055' '___'`
echo $ac_n "checking for dlfcn.h""... $ac_c" 1>&6
if eval "test \"`echo '$''{'ac_cv_header_$ac_safe'+set}'`\" = set"; then
  echo $ac_n "(cached) $ac_c" 1>&6
else
  cat > $conftest.$ac_ext <<EOF
#line 5062 "configure"
#include "$confdefs.h"
#include <dlfcn.h>
EOF
ac_try="$ac_cpp $conftest.$ac_ext >/dev/null 2>$conftest.out"
{ (eval echo configure:5067: \"$ac_try\") 1>&5; (eval $ac_try) 2>&5; }
ac_err=`grep -v '^ *+' $conftest.out`
if test -z "$ac_err"; then
  rm -rf $conftest*
  eval "ac_cv_header_$ac_safe=yes"
else
  echo "$ac_err" >&5
  rm -rf $conftest*
  eval "ac_cv_header_$ac_safe=no"
fi
rm -f $conftest*
fi
if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
  echo "$ac_t""yes" 1>&6
  
	    SLIB_CFLAGS="-fpic"
	    SLIB_LD="ld -Bshareable"
	    SLIB_LD_LIBS=""
	    SLIB_SUFFIX=".so"
	
else
  echo "$ac_t""no" 1>&6

	    SLIB_CFLAGS=""
	    SLIB_LD="echo tclLdAout $CC \{$SLIB_CFLAGS\} | `pwd`/tclsh -r -G 0"
	    SLIB_LD_LIBS=""
	    SLIB_SUFFIX="..o"
	
fi

	DL_LIBS=""
	LD_FLAGS=""
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""

	# FreeBSD doesn't handle version numbers with dots.  Also, have to
	# append a dummy version number to .so file names.

	GLISH_SLIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.0'
	GLISH_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.a'
	LIB_VERSIONS_OK=nodots
	GC_MACH_DEP=mach_dep.o
	;;
    nextstep*)
	SLIB_CFLAGS=""
	SLIB_LD="cc -nostdlib -r"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS=""
	LD_FLAGS=""
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""
	GC_MACH_DEP=mach_dep.o
	;;
    osf1.[012])
	# OSF/1 1.[012] from OSF, and derivatives, including Paragon OSF/1
	SLIB_CFLAGS=""
	# Hack: make package name same as library name
	SLIB_LABEL='-soname '
	SLIB_LD='ld -R -export $@:'
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS=""
	LD_FLAGS=""
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""
	GC_MACH_DEP=alpha_mach_dep.o
	GC_LOW_OPT="-Wo,-notail"
	MACH_SYSINFO=sysinfo/osf1.cc
        GLIBS="$GLIBS -lmach -lpset"
	;;
    osf1.*)
	# OSF/1 1.3 from OSF using ELF, and derivatives, including AD2
	SLIB_CFLAGS="-fpic"
	SLIB_LABEL='-soname '
	SLIB_LD="ld -shared"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS=""
	LD_FLAGS=""
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""
	GC_MACH_DEP=alpha_mach_dep.o
	GC_LOW_OPT="-Wo,-notail"
	MACH_SYSINFO=sysinfo/osf1.cc
        GLIBS="$GLIBS -lmach -lpset"
	;;
    osf3.*)
        # Digital OSF/1
	SLIB_CFLAGS=""
	SLIB_LABEL='-soname '
	SLIB_LD='ld -shared -expect_unresolved "*"'
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS=""
	LD_FLAGS=""
	RPATH_PREFIX="-Wl,-rpath,"

	if test -z "$static_binary"; then
	    GLISH_LD_SEARCH="-Wl,-rpath,$full_libdir_p$cxx_rpath:$full_libdir"
	fi

	TK_LD_RPATH="-Wl,-rpath,$full_libdir_p$cxx_rpath:$full_libdir"
        
    if test -n "$tcl_library"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,-rpath,$tcl_library"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$tcl_library"
        fi
    fi

        
    if test -n "$x_includes"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,-rpath,$x_includes"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$x_includes"
        fi
    fi

        
    if test -n "$PGPLOTLINKSEARCH"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-Wl,-rpath,$PGPLOTLINKSEARCH"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$PGPLOTLINKSEARCH"
        fi
    fi

	GC_MACH_DEP=alpha_mach_dep.o
	GC_LOW_OPT="-Wo,-notail"
	MACH_SYSINFO=sysinfo/osf1.cc
        GLIBS="$GLIBS -lmach -lpset"
	;;
    osf4.*)
        # Digital OSF/1
	SLIB_CFLAGS=""
	SLIB_LABEL='-soname '
	SLIB_LD='ld -shared -expect_unresolved "*"'
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS=""
	LD_FLAGS=""
	RPATH_PREFIX="-rpath "

	if test -z "$static_binary"; then
	    GLISH_LD_SEARCH="-rpath $full_libdir_p$cxx_rpath:$full_libdir"
	fi

	TK_LD_RPATH="-rpath $full_libdir_p$cxx_rpath:$full_libdir"
        
    if test -n "$tcl_library"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-rpath $tcl_library"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$tcl_library"
        fi
    fi

        
    if test -n "$x_includes"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-rpath $x_includes"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$x_includes"
        fi
    fi

        
    if test -n "$PGPLOTLINKSEARCH"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-rpath $PGPLOTLINKSEARCH"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$PGPLOTLINKSEARCH"
        fi
    fi

	GC_MACH_DEP=alpha_mach_dep.o
	GC_LOW_OPT="-Wo,-notail"
	MACH_SYSINFO=sysinfo/osf1.cc
        GLIBS="$GLIBS -lmach -lpset"
	;;
    riscos*)
	SLIB_CFLAGS="-G 0"
	SLIB_LD="echo tclLdAout $CC \{$SLIB_CFLAGS\} | `pwd`/tclsh -r -G 0"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX="..o"
	DL_LIBS=""
	LD_FLAGS="-Wl,-D,08000000"
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""
	GC_MACH_DEP=mips_ultrix_mach_dep.o
	;;
    sco_sv3.2*)
        # Note, dlopen is available only on SCO 3.2.5 and greater.  However,
        # this test works, since "uname -s" was non-standard in 3.2.4 and
        # below.
	SLIB_CFLAGS="-Kpic -belf"
	SLIB_LD="ld -G"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS=""
	LD_FLAGS="-belf -Wl,-Bexport"
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""
	GC_MACH_DEP=mach_dep.o
	;;
     sinix*5.4*)
	SLIB_CFLAGS="-K PIC"
	SLIB_LD="cc -G"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS="-ldl"
	LD_FLAGS=""
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""
	GC_MACH_DEP=mach_dep.o
	;;
    sunos4*)
	SLIB_CFLAGS="-PIC"
	SLIB_LD="ld"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so.$_cv_version"
	DL_LIBS="-ldl"
	LD_FLAGS=""
	if test -z "$static_binary"; then
	    GLISH_LD_SEARCH="-L$full_libdir_p $cxx_lpath -L$full_libdir"
	fi

	TK_LD_RPATH="-L$full_libdir_p $cxx_lpath -L$full_libdir"
        if test -n "$x_libraries"; then
	    TK_LD_RPATH="$TK_LD_RPATH -L$x_libraries"
	fi
        if test -n "$tcl_library"; then
	    TK_LD_RPATH="$TK_LD_RPATH -L$tcl_library"
	fi

	# SunOS can't handle version numbers with dots in them in library
	# specs, like -ltcl7.5, so use -ltcl75 instead.  Also, it
	# requires an extra version number at the end of .so file names.
	# So, the library has to have a name like libtcl75.so.1.0

	GLISH_SLIB_SUFFIX='`echo ${VERSION} | tr -d .`.so.1.0'
	GLISH_LIB_SUFFIX='`echo ${VERSION} | tr -d .`.a'
	LIB_VERSIONS_OK=nodots
	GC_MACH_DEP=sparc_sunos4_mach_dep.o
	;;
    solaris2*)
	SLIB_CFLAGS="-K PIC"
	if test "$KAI" = yes; then
	    LDI="--backend "
	    SLIB_LD="$CXX"
	    SLIB_CXXFLAGS="-KPIC"
	else
	    LDI=""
	    SLIB_CXXFLAGS="-PIC"
	    if test "$ac_cv_prog_gcc" = yes; then
	        SLIB_LD="$CC -Wno-deprecated -dy -G -i"
            else
	        SLIB_LD="/usr/ccs/bin/ld -G -z text"
	    fi
	fi
	SLIB_LD_LIBS='${LIBS}'
	SLIB_SUFFIX=".so"
	SLIB_LABEL="-h "
	DL_LIBS="-ldl"
	LD_FLAGS=""
	RPATH_PREFIX="${LDI}-R ${LDI}"

	if test -z "$static_binary"; then
	    GLISH_LD_SEARCH="${LDI}-R ${LDI}$full_libdir_p$cxx_rpath:$full_libdir"
	fi

	TK_LD_RPATH="${LDI}-R ${LDI}$full_libdir_p$cxx_rpath:$full_libdir"
        
    if test -n "$tcl_library"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="${LDI}-R ${LDI}$tcl_library"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$tcl_library"
        fi
    fi

        
    if test -n "$x_libraries"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="${LDI}-R ${LDI}$x_libraries"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$x_libraries"
        fi
    fi

        
    if test -n "$PGPLOTLINKSEARCH"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="${LDI}-R ${LDI}$PGPLOTLINKSEARCH"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$PGPLOTLINKSEARCH"
        fi
    fi

	GC_MACH_DEP=sparc_mach_dep.o
	MACH_SYSINFO=sysinfo/solaris.cc
        GLIBS="$GLIBS -lkstat"
	;;
    ultrix4.*)
	SLIB_CFLAGS="-G 0"
	SLIB_SUFFIX="..o"
	SLIB_LD="echo tclLdAout $CC \{$SLIB_CFLAGS\} | `pwd`/tclsh -r -G 0"
	SLIB_LD_LIBS=""
	DL_LIBS=""
	LD_FLAGS="-Wl,-D,08000000"
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""
	GC_MACH_DEP=mips_ultrix_mach_dep.o
	;;
    unix_sv*)
	SLIB_CFLAGS="-K PIC"
	SLIB_LD="cc -G"
	SLIB_LD_LIBS=""
	SLIB_SUFFIX=".so"
	DL_LIBS="-ldl"
	LD_FLAGS="-Wl,-Bexport"
	GLISH_LD_SEARCH=""
	TK_LD_RPATH=""
	GC_MACH_DEP=mach_dep.o
	;;
    darwin*)
	CLIENT_LIBS_extra=
	MALLOC=''
	SLIB_CFLAGS="+z"
	SLIB_LABEL=''
	SLIB_LD="g++ -dynamiclib -single_module"
	SLIB_LD_LIBS='-L/opt/local/lib ${LIBS}'
	SLIB_LD_LIBS_sos='-L${LIBDIR_P} -L${LIBDIR} ${LIBS} -lnpd -install_name $(LIBDIR)/libsos$(GSUFFIX)'
	SLIB_LD_LIBS_regx='-L${LIBDIR_P} -L${LIBDIR} ${LIBS} -lnpd -install_name $(LIBDIR)/libregx$(GSUFFIX)'
	SLIB_LD_LIBS_edit='-L${LIBDIR_P} -L${LIBDIR} ${LIBS} -lnpd -install_name $(LIBDIR)/lib$(NAME)$(GSUFFIX)'
	SLIB_LD_LIBS_npd='-install_name $(LIBDIR)/libnpd$(GSUFFIX)'
	SLIB_LD_LIBS_glish='-L${LIBDIR_P} -L${LIBDIR} -lsos -lnpd -install_name $(LIBDIR)/libglish$(GSUFFIX)'
	SLIB_LD_LIBS_glishp='-L${LIBDIR_P} -L${LIBDIR} -lglish -lregx -ledit -lsos -lnpd'
	SLIB_LD_LIBS_glishtk='-lX11 -install_name $(LIBDIR)/libglishtk$(GSUFFIX)'
															SLIB_LD_FLAGS_glishtk=
	SLIB_SUFFIX=".dylib"
	DL_LIBS="-ldl"
	LD_FLAGS="-Wl,-E"
	RPATH_PREFIX="-L"

	if test -z "$static_binary"; then
	    GLISH_LD_SEARCH="-L$full_libdir_p$cxx_rpath:$full_libdir:."
	fi

	if test -n "$cxx_rpath"; then
	    TK_LD_RPATH="-L$full_libdir_p:$full_libdir"
	else
	    TK_LD_RPATH="-L$full_libdir_p$cxx_rpath:$full_libdir"
	fi

        
    if test -n "$tcl_library"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-L$tcl_library"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$tcl_library"
        fi
    fi

        
    if test -n "$x_libraries"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-L$x_libraries"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$x_libraries"
        fi
    fi

        
    if test -n "$PGPLOTLINKSEARCH"; then
        if test -z "$TK_LD_RPATH"; then
            TK_LD_RPATH="-L$PGPLOTLINKSEARCH"
        else
            TK_LD_RPATH="$TK_LD_RPATH:$PGPLOTLINKSEARCH"
        fi
    fi


	if test -n "$TK_LD_RPATH"; then
	    TK_LD_RPATH="$TK_LD_RPATH:."
	fi
	GC_MACH_DEP=mach_dep.o
	
    for tmp_index in glish sos npd editline regx; do
        tmp_suffix=SLIB_SUFFIX
	tmp_id=`echo ${tmp_index}_${tmp_suffix} | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
        if test -f "$tmp_index/change.h"; then
            eval ${tmp_id}="$_cv_version".`cat $tmp_index/change.h | head -1 | sed 's/^[^0-9]*\([0-9][0-9]*\).*/\1/'`
            eval ${tmp_id}=`eval echo \\${${tmp_id}} | sed -e "s/^/./" -e "s/$/$SLIB_SUFFIX/" `
	else
            eval ${tmp_id}="$_cv_version".0
            eval ${tmp_id}=`eval echo \\${${tmp_id}} | sed -e "s/^/./" -e "s/$/$SLIB_SUFFIX/" `
        fi
    done

	MACH_SYSINFO=sysinfo/darwin.cc

	if test -n "$TK_LD_RPATH"; then
	    TK_LD_RPATH=`echo $TK_LD_RPATH | sed 's/:/ -L/g'`
	fi
	if test -n "$GLISH_LD_SEARCH"; then
	    GLISH_LD_SEARCH=`echo $GLISH_LD_SEARCH | sed 's/:/ -L/g'`
	fi

	LDOBJ_LIBS="-L\${LIBDIR_P} $TK_LD_RPATH -lglishtk -lglish -lsos -lnpd $TK_LIB -lX11"
	;;
esac

if test -z "$SLIB_$CXXFLAGS"; then
    SLIB_CXXFLAGS="$SLIB_CFLAGS"
fi

if test $ac_cv_prog_gxx = yes; then
    SLIB_CXXFLAGS='-fPIC'
fi

if test $ac_cv_prog_gcc = yes; then
    SLIB_CFLAGS='-fPIC'
fi

echo $ac_n "checking for shared loader""... $ac_c" 1>&6
echo "$ac_t""$SLIB_LD" 1>&6

MAKE_SLIB="$SLIB_LD -o"
if test -z "$MAKE_LIB"; then
    MAKE_LIB="ar cru"
fi

if test -z "$TK_CXX_RPATH"; then
    TK_CXX_RPATH="$TK_LD_RPATH"
fi

if test -z "$GLISH_SLIB_SUFFIX"; then
    
    for tmp_index in glish sos npd editline regx; do
        tmp_suffix=SLIB_SUFFIX
	tmp_id=`echo ${tmp_index}_${tmp_suffix} | tr 'abcdefghijklmnopqrstuvwxyz' 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'`
        if test -f "$tmp_index/change.h"; then
            eval ${tmp_id}="$SLIB_SUFFIX.$_cv_version".`cat $tmp_index/change.h | head -1 | sed 's/^[^0-9]*\([0-9][0-9]*\).*/\1/'`
            
	else
            eval ${tmp_id}="$SLIB_SUFFIX.$_cv_version".0
            
        fi
    done

fi

GLISH_LIB_SUFFIX=".a"
if test "$GLISH_LIB_SUFFIX" = "" ; then
if test "$LIB_VERSIONS_OK" = "ok"; then
    GLISH_LIB_SUFFIX="$VERSION.a"
else
    GLISH_LIB_SUFFIX="`echo $VERSION | tr -d .`.a"
fi
fi

if test "$static_binary" = "yes"; then
    SHARED_BIN=
    STATIC_BIN=bin_tgt
    GLISH_LIBS="$GLISH_LD_SEARCH \${LIBDIR_P}/libglish$GLISH_LIB_SUFFIX \${LIBDIR_P}/libsos$GLISH_LIB_SUFFIX \${LIBDIR_P}/libedit$GLISH_LIB_SUFFIX \${LIBDIR_P}/libregx$GLISH_LIB_SUFFIX"
    CLIENT_LIBS="\${LIBDIR_P}/libglish$GLISH_LIB_SUFFIX \${LIBDIR_P}/libsos$GLISH_LIB_SUFFIX"
    TKCLIENT_LIBS="-L\${LIBDIR_P} $cxx_lpath $LINK_LIBGLISHTK \${LIBDIR_P}/libglish$GLISH_LIB_SUFFIX \${LIBDIR_P}/libsos$GLISH_LIB_SUFFIX"
    TKLIB_LIBS="-L\${LIBDIR_P} $cxx_lpath \${LIBDIR_P}/libglish$GLISH_LIB_SUFFIX \${LIBDIR_P}/libsos$GLISH_LIB_SUFFIX"
    if test "$do_npd" = "yes"; then
	GLISH_LIBS="$GLISH_LIBS \${LIBDIR_P}/libnpd$GLISH_LIB_SUFFIX"
	CLIENT_LIBS="$CLIENT_LIBS \${LIBDIR_P}/libnpd$GLISH_LIB_SUFFIX"
	TKCLIENT_LIBS="$TKCLIENT_LIBS \${LIBDIR_P}/libnpd$GLISH_LIB_SUFFIX"
	TKLIB_LIBS="$TKLIB_LIBS \${LIBDIR_P}/libnpd$GLISH_LIB_SUFFIX"
    fi
    CLIENT_LIBS="$CLIENT_LIBS $CLIENT_LIBS_extra"
else
    SHARED_BIN=bin_tgt
    STATIC_BIN=
    GLISH_LIBS="$GLISH_LD_SEARCH -L\${LIBDIR_P} $cxx_lpath $LINK_LIBGLISH_interp $LINK_LIBSOS $LINK_LIBEDIT $LINK_LIBREGX"
    CLIENT_LIBS="$GLISH_LD_SEARCH -L\${LIBDIR_P} $cxx_lpath $LINK_LIBGLISH $LINK_LIBSOS"
    TKCLIENT_LIBS="-L\${LIBDIR_P} $cxx_lpath $LINK_LIBGLISHTK ${GLISH_SLIB_VERSION} $LINK_LIBGLISH $LINK_LIBSOS"
    TKLIB_LIBS="-L\${LIBDIR_P} $cxx_lpath $LINK_LIBGLISH $LINK_LIBSOS"
    if test "$do_npd" = "yes"; then
	GLISH_LIBS="$GLISH_LIBS $LINK_LIBNPD"
	CLIENT_LIBS="$CLIENT_LIBS $LINK_LIBNPD"
	TKCLIENT_LIBS="$TKCLIENT_LIBS $LINK_LIBNPD"
	TKLIB_LIBS="$TKLIB_LIBS $LINK_LIBNPD"
    fi
    CLIENT_LIBS="$CLIENT_LIBS $CLIENT_LIBS_extra"
    if test -n "$DL_LIBS"; then
	CLIENT_LIBS="$CLIENT_LIBS $DL_LIBS"
    fi
fi

GLISH_LIBS="$GLISH_LIBS $GLIBS $DL_LIBS"

CLIENT_LIBS_DEPEND="\${LIBDIR_P}/libglish$GLISH_LIB_SUFFIX \${LIBDIR_P}/libsos$GLISH_LIB_SUFFIX"
if test "$do_npd" = "yes"; then
    CLIENT_LIBS_DEPEND="$CLIENT_LIBS_DEPEND \${LIBDIR_P}/libnpd$GLISH_LIB_SUFFIX"
fi

SHARED_LIB=lib_tgt
STATIC_LIB=lib_tgt
if test "$enable_shared" != "yes"; then
    SHARED_LIB=
fi

if test "$LIB_VERSIONS_OK" = "ok"; then
    TCL_BUILD_LIB_SPEC="-L`pwd` -ltcl${VERSION}"
    TCL_LIB_SPEC="-L${exec_prefix}/lib -ltcl${VERSION}"
else
    TCL_BUILD_LIB_SPEC="-L`pwd` -ltcl`echo ${VERSION} | tr -d .`"
    TCL_LIB_SPEC="-L${exec_prefix}/lib -ltcl`echo ${VERSION} | tr -d .`"
fi

echo $ac_n "checking shared flags for $CC""... $ac_c" 1>&6
if test -n "$SLIB_CFLAGS"; then
    SAVED_CFLAGS="$CFLAGS"
    CFLAGS="$CFLAGS $SLIB_CFLAGS"
    cat > $conftest.$ac_ext <<EOF
#line 5591 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {

; return 0; }
EOF
if { (eval echo configure:5599: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  rm -rf $conftest*
  SLIB_CFLAGS=''
fi
rm -f $conftest*

    CFLAGS="$SAVED_CFLAGS"
fi
echo "$ac_t""$SLIB_CFLAGS" 1>&6

echo $ac_n "checking shared flags for $CXX""... $ac_c" 1>&6
if test -n "$SLIB_CXXFLAGS"; then
    ac_ext=C
# CXXFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CXXCPP $CPPFLAGS'
ac_compile='${CXX-g++} -c $CXXFLAGS $CPPFLAGS $conftest.$ac_ext 1>&5'
ac_link='${CXX-g++} -o $conftest $CXXFLAGS $CPPFLAGS $LDFLAGS $conftest.$ac_ext $LIBS 1>&5'

    SAVED_CXXFLAGS="$CXXFLAGS"
    CXXFLAGS="$CXXFLAGS $SLIB_CXXFLAGS"
    cat > $conftest.$ac_ext <<EOF
#line 5622 "configure"
#include "$confdefs.h"

int main() { return 0; }
int t() {

; return 0; }
EOF
if { (eval echo configure:5630: \"$ac_compile\") 1>&5; (eval $ac_compile) 2>&5; }; then
  :
else
  rm -rf $conftest*
  SLIB_CXXFLAGS=''
fi
rm -f $conftest*

    CXXFLAGS="$SAVED_CXXFLAGS"
    ac_ext=c
# CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
ac_cpp='$CPP $CPPFLAGS'
ac_compile='${CC-cc} -c $CFLAGS $CPPFLAGS $conftest.$ac_ext 1>&5'
ac_link='${CC-cc} -o $conftest $CFLAGS $CPPFLAGS $LDFLAGS $conftest.$ac_ext $LIBS 1>&5'

fi
echo "$ac_t""$SLIB_CXXFLAGS" 1>&6

MAKE_SLIB_expanded=$MAKE_SLIB
while :
do
    case "${MAKE_SLIB_expanded}" in
	*\$\{*\}*) MAKE_SLIB_expanded=`eval "echo ${MAKE_SLIB_expanded}"` ;;
	*) break ;;
    esac
done
MAKE_SLIB_expanded_rel_path=`echo ${MAKE_SLIB_expanded} | sed 's/^\([\.\/]*\).*/\1/'`
MAKE_SLIB_expanded_rel_path=`echo $MAKE_SLIB_expanded_rel_path | sed -e 's/\/\.\//\//' -e 's/^\.\///' -e 's/\/\.$//' -e 's/\/$//'`
if test -n "$MAKE_SLIB_expanded_rel_path"; then
    MAKE_SLIB_expanded_root=`cd $MAKE_SLIB_expanded_rel_path; pwd`
    case "${MAKE_SLIB_expanded_root}" in
    /tmp_mnt/*)
	MAKE_SLIB_expanded_root_tmp_mnt=`echo ${MAKE_SLIB_expanded_root} | sed 's/^\/tmp_mnt\///'`
	test -d "/${MAKE_SLIB_expanded_root_tmp_mnt}" && MAKE_SLIB_expanded_root="/${MAKE_SLIB_expanded_root_tmp_mnt}"
	;;
esac

    MAKE_SLIB_expanded_end=`echo ${MAKE_SLIB_expanded} | sed 's/^\([\.\/]*\)//'`
    MAKE_SLIB_expanded=`echo "$MAKE_SLIB_expanded_root/$MAKE_SLIB_expanded_end" | sed 's/\/$//'`
fi

LIBDIR_P="`pwd`/lib/$ARCH"
TKCLIENT_LIBS_expanded=$TKCLIENT_LIBS
while :
do
    case "${TKCLIENT_LIBS_expanded}" in
	*\$\{*\}*) TKCLIENT_LIBS_expanded=`eval "echo ${TKCLIENT_LIBS_expanded}"` ;;
	*) break ;;
    esac
done
TKCLIENT_LIBS_expanded_rel_path=`echo ${TKCLIENT_LIBS_expanded} | sed 's/^\([\.\/]*\).*/\1/'`
TKCLIENT_LIBS_expanded_rel_path=`echo $TKCLIENT_LIBS_expanded_rel_path | sed -e 's/\/\.\//\//' -e 's/^\.\///' -e 's/\/\.$//' -e 's/\/$//'`
if test -n "$TKCLIENT_LIBS_expanded_rel_path"; then
    TKCLIENT_LIBS_expanded_root=`cd $TKCLIENT_LIBS_expanded_rel_path; pwd`
    case "${TKCLIENT_LIBS_expanded_root}" in
    /tmp_mnt/*)
	TKCLIENT_LIBS_expanded_root_tmp_mnt=`echo ${TKCLIENT_LIBS_expanded_root} | sed 's/^\/tmp_mnt\///'`
	test -d "/${TKCLIENT_LIBS_expanded_root_tmp_mnt}" && TKCLIENT_LIBS_expanded_root="/${TKCLIENT_LIBS_expanded_root_tmp_mnt}"
	;;
esac

    TKCLIENT_LIBS_expanded_end=`echo ${TKCLIENT_LIBS_expanded} | sed 's/^\([\.\/]*\)//'`
    TKCLIENT_LIBS_expanded=`echo "$TKCLIENT_LIBS_expanded_root/$TKCLIENT_LIBS_expanded_end" | sed 's/\/$//'`
fi







































































#dnl##
#dnl## $1 => input file
#dnl## $2 => output file
#dnl##
#AC_DEFUN(AC_EXTRA_SUBST,[
#subdir=`echo $1 | sed ['s%/[^/]*$%%']`
#tosrc=`echo $2 | sed -e ['s%/[^/]*$%%'] -e ["s%^.*$ARCH%..%"] -e ['s%/[^/]*%/..%g']`
#AC_MSG_WARN($subdir:$tosrc)
#])

echo "$ac_t""creating architecture directories" 1>&6
$mkhier "sos/$ARCH/static"
$mkhier "sos/$ARCH/shared"
$mkhier "npd/$ARCH/static"
$mkhier "npd/$ARCH/shared"
$mkhier "editline/$ARCH/static"
$mkhier "editline/$ARCH/shared"
$mkhier "regx/$ARCH/static"
$mkhier "regx/$ARCH/shared"
$mkhier "glish/$ARCH/static"
$mkhier "glish/$ARCH/shared"
$mkhier "glish/clients/glishtk/$ARCH/static"
$mkhier "glish/clients/glishtk/$ARCH/shared"

if test "$GLISH_SLIB_SUFFIX" != "$SLIB_SUFFIX"; then
    make_slib_symlinks="yes"
fi

if test -n "$SLIB_LABEL"; then
    label_slib="yes"
fi

echo "$ac_t""preprocessing template makefiles" 1>&6
rm -f $ARCH/preprocess.conf

cat > $ARCH/preprocess.conf <<EOF
#!/bin/sh
AIX="$AIXpp"
cat <<'!NO!SUBS!'
EOF

sed -e "s/^\#FI/!NO!SUBS!\\
fi\\
cat <<'!NO!SUBS!'/" -e "s/^\#ELSE/!NO!SUBS!\\
else\\
cat <<'!NO!SUBS!'/" -e "s/^\#IF \([A-Z][_A-Z]*\)/!NO!SUBS!\\
if test -n \"\$\1\"; then\\
cat <<'!NO!SUBS!'/" < glish/mkfile.in >> $ARCH/preprocess.conf

cat >> $ARCH/preprocess.conf <<\EOF
!NO!SUBS!
EOF

rm -f glish/$ARCH/static.in
/bin/sh $ARCH/preprocess.conf > glish/$ARCH/static.in

rm -f $ARCH/preprocess.conf

cat > $ARCH/preprocess.conf <<EOF
#!/bin/sh
SHARED="yes"
AIX="$AIXpp"
LABEL_SLIB="$label_slib"
SLIB_SYM_LINKS="$make_slib_symlinks"
cat <<'!NO!SUBS!'
EOF

sed -e "s/^\#FI/!NO!SUBS!\\
fi\\
cat <<'!NO!SUBS!'/" -e "s/^\#ELSE/!NO!SUBS!\\
else\\
cat <<'!NO!SUBS!'/" -e "s/^\#IF \([A-Z][_A-Z]*\)/!NO!SUBS!\\
if test -n \"\$\1\"; then\\
cat <<'!NO!SUBS!'/" < glish/mkfile.in >> $ARCH/preprocess.conf

cat >> $ARCH/preprocess.conf <<\EOF
!NO!SUBS!
EOF

rm -f glish/$ARCH/shared.in
/bin/sh $ARCH/preprocess.conf > glish/$ARCH/shared.in

rm -f $ARCH/preprocess.conf

cat > $ARCH/preprocess.conf <<EOF
#!/bin/sh
SHARED="yes"
AIX="$AIXpp"
LABEL_SLIB="$label_slib"
SLIB_SYM_LINKS="$make_slib_symlinks"
cat <<'!NO!SUBS!'
EOF

sed -e "s/^\#FI/!NO!SUBS!\\
fi\\
cat <<'!NO!SUBS!'/" -e "s/^\#ELSE/!NO!SUBS!\\
else\\
cat <<'!NO!SUBS!'/" -e "s/^\#IF \([A-Z][_A-Z]*\)/!NO!SUBS!\\
if test -n \"\$\1\"; then\\
cat <<'!NO!SUBS!'/" < glish/clients/glishtk/shared.in >> $ARCH/preprocess.conf

cat >> $ARCH/preprocess.conf <<\EOF
!NO!SUBS!
EOF

rm -f glish/clients/glishtk/$ARCH/shared.in
/bin/sh $ARCH/preprocess.conf > glish/clients/glishtk/$ARCH/shared.in

rm -f $ARCH/preprocess.conf

cat > $ARCH/preprocess.conf <<EOF
#!/bin/sh

cat <<'!NO!SUBS!'
EOF

sed -e "s/^\#FI/!NO!SUBS!\\
fi\\
cat <<'!NO!SUBS!'/" -e "s/^\#ELSE/!NO!SUBS!\\
else\\
cat <<'!NO!SUBS!'/" -e "s/^\#IF \([A-Z][_A-Z]*\)/!NO!SUBS!\\
if test -n \"\$\1\"; then\\
cat <<'!NO!SUBS!'/" < npd/mkfile.in >> $ARCH/preprocess.conf

cat >> $ARCH/preprocess.conf <<\EOF
!NO!SUBS!
EOF

rm -f npd/$ARCH/static.in
/bin/sh $ARCH/preprocess.conf > npd/$ARCH/static.in

rm -f $ARCH/preprocess.conf

cat > $ARCH/preprocess.conf <<EOF
#!/bin/sh
SHARED="yes"
SLIB_SYM_LINKS="$make_slib_symlinks"
AIX="$AIXpp"
LABEL_SLIB="$label_slib"
cat <<'!NO!SUBS!'
EOF

sed -e "s/^\#FI/!NO!SUBS!\\
fi\\
cat <<'!NO!SUBS!'/" -e "s/^\#ELSE/!NO!SUBS!\\
else\\
cat <<'!NO!SUBS!'/" -e "s/^\#IF \([A-Z][_A-Z]*\)/!NO!SUBS!\\
if test -n \"\$\1\"; then\\
cat <<'!NO!SUBS!'/" < npd/mkfile.in >> $ARCH/preprocess.conf

cat >> $ARCH/preprocess.conf <<\EOF
!NO!SUBS!
EOF

rm -f npd/$ARCH/shared.in
/bin/sh $ARCH/preprocess.conf > npd/$ARCH/shared.in

rm -f $ARCH/preprocess.conf

cat > $ARCH/preprocess.conf <<EOF
#!/bin/sh

cat <<'!NO!SUBS!'
EOF

sed -e "s/^\#FI/!NO!SUBS!\\
fi\\
cat <<'!NO!SUBS!'/" -e "s/^\#ELSE/!NO!SUBS!\\
else\\
cat <<'!NO!SUBS!'/" -e "s/^\#IF \([A-Z][_A-Z]*\)/!NO!SUBS!\\
if test -n \"\$\1\"; then\\
cat <<'!NO!SUBS!'/" < editline/mkfile.in >> $ARCH/preprocess.conf

cat >> $ARCH/preprocess.conf <<\EOF
!NO!SUBS!
EOF

rm -f editline/$ARCH/static.in
/bin/sh $ARCH/preprocess.conf > editline/$ARCH/static.in

rm -f $ARCH/preprocess.conf

cat > $ARCH/preprocess.conf <<EOF
#!/bin/sh
SHARED="yes"
SLIB_SYM_LINKS="$make_slib_symlinks"
AIX="$AIXpp"
LABEL_SLIB="$label_slib"
cat <<'!NO!SUBS!'
EOF

sed -e "s/^\#FI/!NO!SUBS!\\
fi\\
cat <<'!NO!SUBS!'/" -e "s/^\#ELSE/!NO!SUBS!\\
else\\
cat <<'!NO!SUBS!'/" -e "s/^\#IF \([A-Z][_A-Z]*\)/!NO!SUBS!\\
if test -n \"\$\1\"; then\\
cat <<'!NO!SUBS!'/" < editline/mkfile.in >> $ARCH/preprocess.conf

cat >> $ARCH/preprocess.conf <<\EOF
!NO!SUBS!
EOF

rm -f editline/$ARCH/shared.in
/bin/sh $ARCH/preprocess.conf > editline/$ARCH/shared.in

rm -f $ARCH/preprocess.conf

cat > $ARCH/preprocess.conf <<EOF
#!/bin/sh

cat <<'!NO!SUBS!'
EOF

sed -e "s/^\#FI/!NO!SUBS!\\
fi\\
cat <<'!NO!SUBS!'/" -e "s/^\#ELSE/!NO!SUBS!\\
else\\
cat <<'!NO!SUBS!'/" -e "s/^\#IF \([A-Z][_A-Z]*\)/!NO!SUBS!\\
if test -n \"\$\1\"; then\\
cat <<'!NO!SUBS!'/" < regx/mkfile.in >> $ARCH/preprocess.conf

cat >> $ARCH/preprocess.conf <<\EOF
!NO!SUBS!
EOF

rm -f regx/$ARCH/static.in
/bin/sh $ARCH/preprocess.conf > regx/$ARCH/static.in

rm -f $ARCH/preprocess.conf

cat > $ARCH/preprocess.conf <<EOF
#!/bin/sh
SHARED="yes"
SLIB_SYM_LINKS="$make_slib_symlinks"
AIX="$AIXpp"
LABEL_SLIB="$label_slib"
cat <<'!NO!SUBS!'
EOF

sed -e "s/^\#FI/!NO!SUBS!\\
fi\\
cat <<'!NO!SUBS!'/" -e "s/^\#ELSE/!NO!SUBS!\\
else\\
cat <<'!NO!SUBS!'/" -e "s/^\#IF \([A-Z][_A-Z]*\)/!NO!SUBS!\\
if test -n \"\$\1\"; then\\
cat <<'!NO!SUBS!'/" < regx/mkfile.in >> $ARCH/preprocess.conf

cat >> $ARCH/preprocess.conf <<\EOF
!NO!SUBS!
EOF

rm -f regx/$ARCH/shared.in
/bin/sh $ARCH/preprocess.conf > regx/$ARCH/shared.in

rm -f $ARCH/preprocess.conf

cat > $ARCH/preprocess.conf <<EOF
#!/bin/sh

cat <<'!NO!SUBS!'
EOF

sed -e "s/^\#FI/!NO!SUBS!\\
fi\\
cat <<'!NO!SUBS!'/" -e "s/^\#ELSE/!NO!SUBS!\\
else\\
cat <<'!NO!SUBS!'/" -e "s/^\#IF \([A-Z][_A-Z]*\)/!NO!SUBS!\\
if test -n \"\$\1\"; then\\
cat <<'!NO!SUBS!'/" < sos/mkfile.in >> $ARCH/preprocess.conf

cat >> $ARCH/preprocess.conf <<\EOF
!NO!SUBS!
EOF

rm -f sos/$ARCH/static.in
/bin/sh $ARCH/preprocess.conf > sos/$ARCH/static.in

rm -f $ARCH/preprocess.conf

cat > $ARCH/preprocess.conf <<EOF
#!/bin/sh
SHARED="yes"
SLIB_SYM_LINKS="$make_slib_symlinks"
AIX="$AIXpp"
LABEL_SLIB="$label_slib"
cat <<'!NO!SUBS!'
EOF

sed -e "s/^\#FI/!NO!SUBS!\\
fi\\
cat <<'!NO!SUBS!'/" -e "s/^\#ELSE/!NO!SUBS!\\
else\\
cat <<'!NO!SUBS!'/" -e "s/^\#IF \([A-Z][_A-Z]*\)/!NO!SUBS!\\
if test -n \"\$\1\"; then\\
cat <<'!NO!SUBS!'/" < sos/mkfile.in >> $ARCH/preprocess.conf

cat >> $ARCH/preprocess.conf <<\EOF
!NO!SUBS!
EOF

rm -f sos/$ARCH/shared.in
/bin/sh $ARCH/preprocess.conf > sos/$ARCH/shared.in


trap '' 1 2 15
cat > $confcache <<\EOF
# This file is a shell script that caches the results of configure
# tests run on this system so they can be shared between configure
# scripts and configure runs.  It is not useful on other systems.
# If it contains results you don't want to keep, you may remove or edit it.
#
# By default, configure uses ./config.cache as the cache file,
# creating it if it does not exist already.  You can give configure
# the --cache-file=FILE option to use a different cache file; that is
# what configure does when it calls configure scripts in
# subdirectories, so they share the cache.
# Giving --cache-file=/dev/null disables caching, for debugging configure.
# config.status only pays attention to the cache file if you give it the
# --recheck option to rerun configure.
#
EOF
# Ultrix sh set writes to stderr and can't be redirected directly,
# and sets the high bit in the cache file unless we assign to the vars.
(set) 2>&1 |
  sed -n -e "s/\\\\t/ /g" \
         -e "s/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\$'\(.*\)'/\1=\2/" \
         -e "s/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/\1=\${\1='\2'}/p" \
  >> $confcache
if cmp -s $cache_file $confcache; then
  :
else
  if test -w $cache_file; then
    echo "updating cache $cache_file"
    cat $confcache > $cache_file
  else
    echo "not updating unwritable cache $cache_file"
  fi
fi
rm -f $confcache

trap 'rm -fr $conftest* $confdefs* core core.* *.core $ac_clean_files; exit 1' 1 2 15

test "x$prefix" = xNONE && prefix=$ac_default_prefix
# Let make expand exec_prefix.
test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'

# Any assignment to VPATH causes Sun make to only execute
# the first set of double-colon rules, so remove it if not needed.
# If there is a colon in the path, we need to keep it.
if test "x$srcdir" = x.; then
  ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
fi

trap 'rm -f $CONFIG_STATUS $conftest*; exit 1' 1 2 15

DEFS=-DHAVE_CONFIG_H

# Without the "./", some shells look in PATH for config.status.
: ${CONFIG_STATUS=./config.status}

echo creating $CONFIG_STATUS
rm -f $CONFIG_STATUS
cat > $CONFIG_STATUS <<EOF
#! /bin/sh
# Generated automatically by configure.
# Run this file to recreate the current configuration.
# This directory was configured as follows,
# on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
#
# $0 $ac_configure_args
#
# Compiler output produced by configure, useful for debugging
# configure, is in ./config.log if it exists.

ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
for ac_option
do
  case "\$ac_option" in
  -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
    echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
    exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
  -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
    echo "$CONFIG_STATUS generated by autoconf version 2.10"
    exit 0 ;;
  -help | --help | --hel | --he | --h)
    echo "\$ac_cs_usage"; exit 0 ;;
  *) echo "\$ac_cs_usage"; exit 1 ;;
  esac
done

ac_given_srcdir=$srcdir
ac_given_INSTALL="$INSTALL"

trap 'rm -fr `echo "$ARCH/glish.options:config/glish.options.in npd/$ARCH/static/Makefile:npd/$ARCH/static.in npd/$ARCH/shared/Makefile:npd/$ARCH/shared.in sos/$ARCH/static/Makefile:sos/$ARCH/static.in sos/$ARCH/shared/Makefile:sos/$ARCH/shared.in editline/$ARCH/static/Makefile:editline/$ARCH/static.in editline/$ARCH/shared/Makefile:editline/$ARCH/shared.in regx/$ARCH/static/Makefile:regx/$ARCH/static.in regx/$ARCH/shared/Makefile:regx/$ARCH/shared.in glish/$ARCH/Client.cc:glish/Client.cc.in glish/$ARCH/LdAgent.cc:glish/LdAgent.cc.in glish/$ARCH/static/Makefile:glish/$ARCH/static.in glish/$ARCH/shared/Makefile:glish/$ARCH/shared.in glish/clients/$ARCH/Makefile:glish/clients/Makefile.in glish/clients/glishtk/$ARCH/main.cc:glish/clients/glishtk/main.cc.in glish/clients/glishtk/$ARCH/shared/Makefile:glish/clients/glishtk/$ARCH/shared.in glish/clients/glishtk/$ARCH/static/Makefile:glish/clients/glishtk/static.in $ARCH/glishtk.mak:glish/clients/glishtk/glishtk.mak.in glish/$ARCH/input.h:glish/input.h.in glish/$ARCH/config.h:glish/config.h.in glish/$ARCH/config_p.h:glish/config_p.h.in glish/clients/$ARCH/config.h:glish/config.h.in glish/clients/glishtk/$ARCH/config.h:glish/config.h.in npd/$ARCH/config.h:npd/config.h.in editline/$ARCH/config.h:editline/config.h.in sos/$ARCH/config.h:sos/config.h.in sos/$ARCH/config_p.h:sos/config_p.h.in regx/$ARCH/config.h:regx/config.h.in" | sed "s/:[^ ]*//g"` $conftest*; exit 1' 1 2 15
EOF
cat >> $CONFIG_STATUS <<EOF

# Protect against being on the right side of a sed subst in config.status.
sed 's/%@/@@/; s/@%/@@/; s/%g\$/@g/; /@g\$/s/[\\\\&%]/\\\\&/g;
 s/@@/%@/; s/@@/@%/; s/@g\$/%g/' > $conftest.subs <<\\CEOF
$ac_vpsub
$extrasub
s%@host@%$host%g
s%@host_alias@%$host_alias%g
s%@host_cpu@%$host_cpu%g
s%@host_vendor@%$host_vendor%g
s%@host_os@%$host_os%g
s%@CFLAGS@%$CFLAGS%g
s%@CPPFLAGS@%$CPPFLAGS%g
s%@CXXFLAGS@%$CXXFLAGS%g
s%@DEFS@%$DEFS%g
s%@LDFLAGS@%$LDFLAGS%g
s%@LIBS@%$LIBS%g
s%@exec_prefix@%$exec_prefix%g
s%@prefix@%$prefix%g
s%@program_transform_name@%$program_transform_name%g
s%@bindir@%$bindir%g
s%@sbindir@%$sbindir%g
s%@libexecdir@%$libexecdir%g
s%@datadir@%$datadir%g
s%@sysconfdir@%$sysconfdir%g
s%@sharedstatedir@%$sharedstatedir%g
s%@localstatedir@%$localstatedir%g
s%@libdir@%$libdir%g
s%@includedir@%$includedir%g
s%@oldincludedir@%$oldincludedir%g
s%@infodir@%$infodir%g
s%@mandir@%$mandir%g
s%@strip_binary@%$strip_binary%g
s%@SCRIPTDIR@%$SCRIPTDIR%g
s%@SCRIPTDIRTCL@%$SCRIPTDIRTCL%g
s%@RCDIR@%$RCDIR%g
s%@LOADPATH@%$LOADPATH%g
s%@loaddir@%$loaddir%g
s%@DOT@%$DOT%g
s%@TOUCH_PROXY@%$TOUCH_PROXY%g
s%@MINSPACE_RM@%$MINSPACE_RM%g
s%@subdirs@%$subdirs%g
s%@CC@%$CC%g
s%@CPP@%$CPP%g
s%@CXX@%$CXX%g
s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
s%@INSTALL_DATA@%$INSTALL_DATA%g
s%@RANLIB@%$RANLIB%g
s%@YACC@%$YACC%g
s%@RSH@%$RSH%g
s%@MALLOC@%$MALLOC%g
s%@HAVE_YY_CHAR@%$HAVE_YY_CHAR%g
s%@KEYDIR@%$KEYDIR%g
s%@TCLSH@%$TCLSH%g
s%@ALTCC@%$ALTCC%g
s%@ARCH_OBJ@%$ARCH_OBJ%g
s%@CXXCPP@%$CXXCPP%g
s%@GLISH_FLAGS@%$GLISH_FLAGS%g
s%@LOOPDECL@%$LOOPDECL%g
s%@XINCLUDES@%$XINCLUDES%g
s%@XLIBSW@%$XLIBSW%g
s%@TK_LIB@%$TK_LIB%g
s%@TK_INCL@%$TK_INCL%g
s%@TK_FLAGS@%$TK_FLAGS%g
s%@DL_LIBS@%$DL_LIBS%g
s%@NPD_LIB@%$NPD_LIB%g
s%@BUILD_NPD@%$BUILD_NPD%g
s%@USENPD@%$USENPD%g
s%@BUILD_PGPLOT@%$BUILD_PGPLOT%g
s%@top_off@%$top_off%g
s%@SLIB_CFLAGS@%$SLIB_CFLAGS%g
s%@SLIB_LABEL@%$SLIB_LABEL%g
s%@SLIB_CXXFLAGS@%$SLIB_CXXFLAGS%g
s%@SLIB_LD_LIBS@%$SLIB_LD_LIBS%g
s%@SLIB_LD_LIBS_sos@%$SLIB_LD_LIBS_sos%g
s%@SLIB_LD_LIBS_regx@%$SLIB_LD_LIBS_regx%g
s%@SLIB_LD_LIBS_edit@%$SLIB_LD_LIBS_edit%g
s%@SLIB_LD_LIBS_npd@%$SLIB_LD_LIBS_npd%g
s%@SLIB_LD_LIBS_glish@%$SLIB_LD_LIBS_glish%g
s%@SLIB_LD_LIBS_glishp@%$SLIB_LD_LIBS_glishp%g
s%@SLIB_LD_LIBS_glishtk@%$SLIB_LD_LIBS_glishtk%g
s%@SLIB_LD_FLAGS_glishtk@%$SLIB_LD_FLAGS_glishtk%g
s%@SLIB_SUFFIX@%$SLIB_SUFFIX%g
s%@LIB_SUFFIX@%$LIB_SUFFIX%g
s%@GLISH_LIB_SUFFIX@%$GLISH_LIB_SUFFIX%g
s%@LDOBJ_LIBS@%$LDOBJ_LIBS%g
s%@GLISH_SLIB_SUFFIX@%$GLISH_SLIB_SUFFIX%g
s%@SOS_SLIB_SUFFIX@%$SOS_SLIB_SUFFIX%g
s%@NPD_SLIB_SUFFIX@%$NPD_SLIB_SUFFIX%g
s%@EDITLINE_SLIB_SUFFIX@%$EDITLINE_SLIB_SUFFIX%g
s%@REGX_SLIB_SUFFIX@%$REGX_SLIB_SUFFIX%g
s%@MAKE_LIB@%$MAKE_LIB%g
s%@MAKE_SLIB@%$MAKE_SLIB%g
s%@MAKE_SLIB_expanded@%$MAKE_SLIB_expanded%g
s%@TK_LD_RPATH@%$TK_LD_RPATH%g
s%@RPATH_PREFIX@%$RPATH_PREFIX%g
s%@TK_CXX_RPATH@%$TK_CXX_RPATH%g
s%@GLISH_LIBS@%$GLISH_LIBS%g
s%@BIN_LIBS@%$BIN_LIBS%g
s%@CLIENT_LIBS@%$CLIENT_LIBS%g
s%@CLIENT_LIBS_DEPEND@%$CLIENT_LIBS_DEPEND%g
s%@TKLIB_LIBS@%$TKLIB_LIBS%g
s%@TKCLIENT_LIBS@%$TKCLIENT_LIBS%g
s%@TKCLIENT_LIBS_expanded@%$TKCLIENT_LIBS_expanded%g
s%@SHARED_LIB@%$SHARED_LIB%g
s%@STATIC_LIB@%$STATIC_LIB%g
s%@SHARED_BIN@%$SHARED_BIN%g
s%@STATIC_BIN@%$STATIC_BIN%g
s%@EXTRA_LIBS@%$EXTRA_LIBS%g
s%@GC_MACH_DEP@%$GC_MACH_DEP%g
s%@GC_LOW_OPT@%$GC_LOW_OPT%g
s%@MACH_SYSINFO@%$MACH_SYSINFO%g
s%@NEED_EMPTY_TK_CB_CONST@%$NEED_EMPTY_TK_CB_CONST%g

CEOF
EOF
cat >> $CONFIG_STATUS <<EOF

CONFIG_FILES=\${CONFIG_FILES-"$ARCH/glish.options:config/glish.options.in npd/$ARCH/static/Makefile:npd/$ARCH/static.in npd/$ARCH/shared/Makefile:npd/$ARCH/shared.in sos/$ARCH/static/Makefile:sos/$ARCH/static.in sos/$ARCH/shared/Makefile:sos/$ARCH/shared.in editline/$ARCH/static/Makefile:editline/$ARCH/static.in editline/$ARCH/shared/Makefile:editline/$ARCH/shared.in regx/$ARCH/static/Makefile:regx/$ARCH/static.in regx/$ARCH/shared/Makefile:regx/$ARCH/shared.in glish/$ARCH/Client.cc:glish/Client.cc.in glish/$ARCH/LdAgent.cc:glish/LdAgent.cc.in glish/$ARCH/static/Makefile:glish/$ARCH/static.in glish/$ARCH/shared/Makefile:glish/$ARCH/shared.in glish/clients/$ARCH/Makefile:glish/clients/Makefile.in glish/clients/glishtk/$ARCH/main.cc:glish/clients/glishtk/main.cc.in glish/clients/glishtk/$ARCH/shared/Makefile:glish/clients/glishtk/$ARCH/shared.in glish/clients/glishtk/$ARCH/static/Makefile:glish/clients/glishtk/static.in $ARCH/glishtk.mak:glish/clients/glishtk/glishtk.mak.in"}
EOF
cat >> $CONFIG_STATUS <<\EOF
for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%.*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  # Adjust relative srcdir, etc. for subdirectories.

  # Remove last slash and all that follows it.  Not all systems have dirname.
  ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
  if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
    # The file is in a subdirectory.
    test ! -d "$ac_dir" && mkdir "$ac_dir"
    ac_dir_suffix="/`echo $ac_dir|sed 's%^\./%%'`"
    # A "../" for each directory in $ac_dir_suffix.
    ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
  else
    ac_dir_suffix= ac_dots=
  fi

  case "$ac_given_srcdir" in
  .)  srcdir=.
      if test -z "$ac_dots"; then top_srcdir=.
      else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
  /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
  *) # Relative path.
    srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
    top_srcdir="$ac_dots$ac_given_srcdir" ;;
  esac

  case "$ac_given_INSTALL" in
  [/$]*) INSTALL="$ac_given_INSTALL" ;;
  *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
  esac
  echo creating "$ac_file"
  rm -f "$ac_file"
  configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
  case "$ac_file" in
  *Makefile*) ac_comsub="1i\\
# $configure_input" ;;
  *) ac_comsub= ;;
  esac

ac_extra_subst=''

  sed -e "$ac_comsub
s%@configure_input@%$configure_input%g
s%@srcdir@%$srcdir%g
s%@top_srcdir@%$top_srcdir%g
s%@INSTALL@%$INSTALL%g
" -f $conftest.subs $ac_given_srcdir/$ac_file_in > $ac_file
fi; done
rm -f $conftest.subs

# These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
# NAME is the cpp macro being defined and VALUE is the value it is being given.
#
# ac_d sets the value in "#define NAME VALUE" lines.
ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
ac_dC='\3'
ac_dD='%g'
# ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_uB='\([ 	]\)%\1#\2define\3'
ac_uC=' '
ac_uD='\4%g'
# ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
ac_eB='$%\1#\2define\3'
ac_eC=' '
ac_eD='%g'

CONFIG_HEADERS=${CONFIG_HEADERS-"glish/$ARCH/input.h:glish/input.h.in glish/$ARCH/config.h:glish/config.h.in glish/$ARCH/config_p.h:glish/config_p.h.in glish/clients/$ARCH/config.h:glish/config.h.in glish/clients/glishtk/$ARCH/config.h:glish/config.h.in npd/$ARCH/config.h:npd/config.h.in editline/$ARCH/config.h:editline/config.h.in sos/$ARCH/config.h:sos/config.h.in sos/$ARCH/config_p.h:sos/config_p.h.in regx/$ARCH/config.h:regx/config.h.in"}
for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
  # Support "outfile[:infile]", defaulting infile="outfile.in".
  case "$ac_file" in
  *:*) ac_file_in=`echo "$ac_file"|sed 's%.*:%%'`
       ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
  *) ac_file_in="${ac_file}.in" ;;
  esac

  echo creating $ac_file

  rm -f $conftest.frag $conftest.in $conftest.out
  cp $ac_given_srcdir/$ac_file_in $conftest.in

EOF

# Transform $confdefs.h into a sed script $conftest.vals that substitutes
# the proper values into config.h.in to produce config.h.  And first:
# Protect against being on the right side of a sed subst in config.status.
# Protect against being in an unquoted here document in config.status.
rm -f $conftest.vals
cat > $conftest.hdr <<\EOF
s/[\\&%]/\\&/g
s%[\\$`]%\\&%g
s%#define \([A-Za-z_][A-Za-z0-9_]*\) *\(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
s%ac_d%ac_u%gp
s%ac_u%ac_e%gp
EOF
sed -n -f $conftest.hdr $confdefs.h > $conftest.vals
rm -f $conftest.hdr

# This sed command replaces #undef with comments.  This is necessary, for
# example, in the case of _POSIX_SOURCE, which is predefined and required
# on some systems where configure will not decide to define it.
cat >> $conftest.vals <<\EOF
s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
EOF

# Break up $conftest.vals because some shells have a limit on
# the size of here documents, and old seds have small limits too.
# Maximum number of lines to put in a single here document.
ac_max_here_lines=12

rm -f $conftest.tail
while :
do
  ac_lines=`grep -c . $conftest.vals`
  # grep -c gives empty output for an empty file on some AIX systems.
  if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
  # Write a limited-size here document to $conftest.frag.
  echo '  cat > $conftest.frag <<CEOF' >> $CONFIG_STATUS
  sed ${ac_max_here_lines}q $conftest.vals >> $CONFIG_STATUS
  echo 'CEOF
  sed -f $conftest.frag $conftest.in > $conftest.out
  rm -f $conftest.in
  mv $conftest.out $conftest.in
' >> $CONFIG_STATUS
  sed 1,${ac_max_here_lines}d $conftest.vals > $conftest.tail
  rm -f $conftest.vals
  mv $conftest.tail $conftest.vals
done
rm -f $conftest.vals

cat >> $CONFIG_STATUS <<\EOF
  rm -f $conftest.frag $conftest.h
  echo "/* $ac_file.  Generated automatically by configure.  */" > $conftest.h
  cat $conftest.in >> $conftest.h
  rm -f $conftest.in
  if cmp -s $ac_file $conftest.h 2>/dev/null; then
    echo "$ac_file is unchanged"
    rm -f $conftest.h
  else
    # Remove last slash and all that follows it.  Not all systems have dirname.
      ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
      if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
      # The file is in a subdirectory.
      test ! -d "$ac_dir" && mkdir "$ac_dir"
    fi
    rm -f $ac_file
    mv $conftest.h $ac_file
  fi
fi; done



exit 0
EOF
chmod +x $CONFIG_STATUS
rm -fr $confdefs* $ac_clean_files
test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS || exit 1

if test "$no_recursion" != yes; then

  # Remove --cache-file and --srcdir arguments so they do not pile up.
  ac_sub_configure_args=
  ac_prev=
  for ac_arg in $ac_configure_args; do
    if test -n "$ac_prev"; then
      ac_prev=
      continue
    fi
    case "$ac_arg" in
    -cache-file | --cache-file | --cache-fil | --cache-fi \
    | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
      ac_prev=cache_file ;;
    -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
    | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
      ;;
    -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
      ac_prev=srcdir ;;
    -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
      ;;
    *) ac_sub_configure_args="$ac_sub_configure_args $ac_arg" ;;
    esac
  done

  for ac_config_dir in glish/clients/make glish/clients/glishtk/pgplot ; do

    # Do not complain, so a configure script can configure whichever
    # parts of a large source tree are present.
    if test ! -d $srcdir/$ac_config_dir; then
      continue
    fi

    echo configuring in $ac_config_dir

    case "$srcdir" in
    .) ;;
    *)
      if test -d ./$ac_config_dir || mkdir ./$ac_config_dir; then :;
      else
        { echo "configure: error: can not create `pwd`/$ac_config_dir" 1>&2; exit 1; }
      fi
      ;;
    esac

    ac_popdir=`pwd`
    cd $ac_config_dir

    case "$srcdir" in
    .) # No --srcdir option.  We are building in place.
      ac_sub_srcdir=$srcdir ;;
    /*) # Absolute path.
      ac_sub_srcdir=$srcdir/$ac_config_dir ;;
    *) # Relative path.
      ac_sub_srcdir=../$srcdir/$ac_config_dir ;;
    esac

    # Check for guested configure; otherwise get Cygnus style configure.
    if test -f $ac_sub_srcdir/configure; then
      ac_sub_configure=$ac_sub_srcdir/configure
    elif test -f $ac_sub_srcdir/configure.in; then
      ac_sub_configure=$ac_configure
    else
      echo "configure: warning: no configuration information is in $ac_config_dir" 1>&2
      ac_sub_configure=
    fi

    # The recursion is here.
    if test -n "$ac_sub_configure"; then

      # Make the cache file name correct relative to the subdirectory.
      # A "../" for each directory in /$ac_config_dir.
      ac_dots=`echo $ac_config_dir|sed -e 's%^\./%%' -e 's%[^/]$%&/%' -e 's%[^/]*/%../%g'`
      case "$cache_file" in
      /*) ac_sub_cache_file=$cache_file ;;
      *) # Relative path.
        ac_sub_cache_file="$ac_dots$cache_file" ;;
      esac
  case "$ac_given_INSTALL" in
        [/$]*) INSTALL="$ac_given_INSTALL" ;;
        *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
        esac

      echo "running ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir"
      # The eval makes quoting arguments work.
      if eval ${CONFIG_SHELL-/bin/sh} $ac_sub_configure $ac_sub_configure_args --cache-file=$ac_sub_cache_file --srcdir=$ac_sub_srcdir
      then :
      else
        { echo "configure: error: $ac_sub_configure failed for $ac_config_dir" 1>&2; exit 1; }
      fi
    fi

    cd $ac_popdir
  done
fi

